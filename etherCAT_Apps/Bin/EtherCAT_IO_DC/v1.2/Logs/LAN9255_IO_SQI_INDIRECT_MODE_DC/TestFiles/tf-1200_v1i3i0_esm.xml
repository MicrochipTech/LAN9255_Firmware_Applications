<?xml version="1.0" encoding="UTF-8" standalone="yes"?><EtherCATTest Name="TF-1200 EtherCAT State Machine" xsi:noNamespaceSchemaLocation="EtherCATTest.xsd" SchemaVersion="1.0.31" TestId="4608" TestVersion="1.3.0" RealeaseState="Released" TestVendorId="1" Url="http://www.ethercat.org/en/conformance.html" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<Comment>Tests of the EtherCAT State Machine. These tests refers to the IEC 61158-6-12 and according ammendments (EtherCAT Specification Errata Sheet ETG1000, latest version)

****** Assumptions of ESM Conformance Test Implementation ******
For the implementation of the ESM test cases the following assumptions are made.

****** SyncManager Settings  ******
The conformance test implementation ot the ESM assumes the following SyncManager configuration as a standard:
SM0:  MbxOut
SM1:  MbxIn
SM2:  Outputs (may be used for Inputs if no Output available)
SM3:  Inputs (if available)\nIf SyncManagers additional to SM2 and/or SM3 are used: At least one of the two SMs mentioned before shall be enabled.

For complex devices with not mailbox (i.e. no mailbox SyncManagers, also possible is:
SM0:  Outputs (may be used for Inputs if no Output available)
SM1:  Inputs (if available)\nIf SyncManagers additional to SM0 and/or SM1 are used: At least one of the two SMs mentioned before shall be enabled.

****** Device Emulation ******
ESM tests only apply to EtherCAT devices with Device Emulation deactivated (register 0x0141:08 = 0).


****** Test Limitations ******
Not all state changes described by the ESM state machine are implemented. This applies basically for tests which require realt time and the bootstrap tests.

****** Description of Test Case Name ******
The test case name describes the current state and the next state (e.g. #1.1 Init &gt; Init), then the test condition (e.g. ErrFlag = 1, AckFlag = 0), and last the event (e.g. AlCtrl = 0x01, i.e. state request with AL Control = 0x01).

****** SM Timeout Values according to ETG.2000 (V1.0.2) ******
3000ms PreopTimeout
10000ms SafeopOpTimout
5000ms BackToInitTimeout
200ms BackToSafeopTimeout

The test will try for about 100ms to write register 0x0120 AL Control with a returning Working Counter value of 1.</Comment>
	<History>
		<HistoryEntry Editor="FH" TestVersion="1.0.11" Date="2010-03-18">#17,#32,#45: When AL Status Code 0x17 was used testing for ErrAck = 0 was successfull (only warning). When ErrAck = 1 a warning and an error was generated since AL Status Code = 0x17 was not allowed any more by test. -&gt; Also allow 0x17 for ErrAck = 1</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.12" Date="2010-03-19">#1.2E: Description:Test in action corrected</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.12" Date="2010-03-19">#17: StartUp Commands in case of ACK = 1 shall be sent before PD SyncManager settings are done</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.13" Date="2010-03-19">#22.2A: State request from ErrSafeOp to PreOp with ErrAck = 0 should not generated Error but Warning (due to compatibility reasons)</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.13" Date="2010-07-28" Id="EX_100728_1 ">_Where: Function SetStateMachTimeouts: 
Description:
Default values are different from those specified in ETG.2000 ESI Spec
preOPTimeout = 3000ms
safeOPTimeout = 3000ms
backSafeOPTimeout = 3000ms
backInitTimeout = 3000ms

_Solution:
Function SetStateMachTimeouts: Use default values as specified by ETG.2000_S_W:
preOPTimeout = 3000ms
safeOPTimeout = 10000ms
backSafeOPTimeout = 200ms
backInitTimeout = 5000ms</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.13" Date="2010-11-29" Id="EX_100714_1">_Where: Test Case #5:
_Description:
For the state change Init to Boot with ErrFlag = TRUE  the backInitTimeout is used. This is the wrong timeout.
_Solution: Use preOpTimeout</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.13" Date="2010-12-01" Id="EN_101201_1">_Where:function GetAllEnabledOutputSm, GetAllEnabledInputSm
_Description: return value "allEnabledOutputSm" (array of byte) was always 0. This did not have any impact of existing tests.
_Solution: write correct value to "allEnabledOutputSm"</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.13" Date="2011-01-24" Id="EN_TF-1200_110124_1:">_Where: #22.2C in Description - PostCondition.
_Description: In the Test Case Description under PostCondition there is a copy paste error. It says "...- Device remains in ErrorPreOp" but should be ErrorSafeOp
Solution: Correct to ErrorSafeOp</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.17" Date="2011-02-25" Id="EN_TF-1200_110225_1:">_Where: Reset function
_Description: When no FMMUs are supported by the ESC (reg 0x04 = 0) the function did still try to reset one FMMU
_Solution: skip resetting FMMUs when FMMU count = 0</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.18" Date="2011-04-13" Id="EN_TF-1200_110413_1:">_Where: test function "MbxHandlerStarted"
_Description: For the logger output not the status of the SyncManager0/1 Deactivate status bits were used
_Solution: Use variables of Deactivate Status Bits for SyncManager 0/1</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.18" Date="2011-04-13" Id="EN_TF-1200_110403_2:">_Where:#3 Check if Mailbox Handler was started
_Descriptoin:Even when no mailobx is supported, i.e. no mailbox SyncManagers are configured in the ESI file, it is tested if the Mailbox Handler was started
_Solution:Only check if MbxHandlerStarted if Mailboxes are described in the ESI element Sm. Skip this check when length = 0 or Enable-Bit = 0 or no Mbx-SyncManagers are described at all</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.18" Date="2011-04-14" Id="EN_TF-1200_110414_1">_Where: Function "SetSmSettings01", became obvious in #3 when no Mailbox SyncManagers are available
_Description: Spelling of jump lable inconsistent.
_Solution: correct spelling</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.19" Date="2011-04-20" Id="EN_TF-1200_110420_1">_Where: Schema assignment
_Description: Schema Version 1.0.3 assigned and copied History element IDs to the ID field</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.19" Date="2011-04-20" Id="EN_TF-1200_110420_2">_Where: #21
_Description: If DuT does not have a Mailbox-SyncManager but DuT Emulation = FALSE the test case is sitll performed.
_Solution: Skip test if DuT does not support an Output Mailbox SyncManager.</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.20" Date="2011-11-14" Id="EN_TF-1200_111114_1" Type="Enhancement">_Where: #13
_Description:After state request PreOp-&gt;PreOp (ErrFlag = 0) a delay time is waited. Since the test waits for the full timeout time anyways the extra delay is not necessary
_Solution:delete extra delay</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.20" Date="2011-11-15" Id="EN_TF-1200_111115_1" Type="Enhancement">_Where: #22.2A
_Description: State request with 0x02 from Al State 0x14 was accepted with a warning due to legacy reasons in the past as an intermediate solution. According to ETG.1000-6 (ESM) this shall not be accepted.
_Solution: Return an error if AL State request with 0x02 is accepted </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.20" Date="2011-11-15" Id="EN_TF-1200_111115_2" Type="Enhancement">_Where: MbxHandlerStarted
_Description: If element Sm:Enable is not available for MbxOut-SyncManager or is set to FALSE the test cannot be performed
_Solution: Check if element Sm:Enable is used and TRUE. Otherwise skip checking if Mbxhandler was started. Check only for Enable of MbxOut-SyncManager and not for MbxIn-SyncManager. An ESI test checking if the MbxOut and MbxIn-Sm-Enable bits have the same value is added.</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.23" Date="2012-01-14" Id="EN_TF-1200-120114_1" Type="Bug">_Where: DuTDescr.SM[i] was compared with "false" (used in functino "GetAllInputSm" and "GetAllOutputSm" and "MbxHandlerStarted"
_Solution: compare with "null" since it is a string</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.23" Date="2012-01-26" Id="EN_TF-1200_120126_1" Type="Bug">_Where: SmChannelDisabled (resp. #42, #43)
_Description: If only SM2 is used and no SM3 described in ESI file the test would try to get SM3 length but fail.
_Solution:Check if SM3 is configured in ESI file before and skip the SM3-Enabled check if not configured.</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.0.23" Date="2012-02-21" Id="EN_TF-1200_120221" Type="Enhancement">_Where: #22.2A
_Description: State request with 0x02 from Al State 0x14 was accepted with a warning due to legacy reasons in the past as an intermediate solution. According to ETG.1000-6 (ESM) this shall not be accepted.
_Solution:The change was rejected by the TAB - it remains a warning</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.0" Date="2012-03-16" Id="EN_TF-1200_120316" Type="Enhancement">Added test case #49</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.0" Date="2012-04-10" Id="EN_TF-1200_120401" Type="Enhancement">_Where: #43
_Description: Name was "Op&gt;Op". The finale state is Safeop
_Solution: Correct name to "Op&gt;SafeOp"</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.0" Date="2012-05-23" Id="EN_TF-1200_120523_1" Type="Enhancement">_Where: function GetAllInputSm and GetAllOutputSm
_Description: SyncManagers entities with ESI element Sm@Virtual = TRUE shall not be configured. 
_Solution: Do not add a SyncManager with Virtual = TRUE to the InputSm and OutputSm list</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.0" Date="2012-05-23" Id="EN_TF-1200_120523_2" Type="Enhancement">_Where:#17, #32, #45
_Description:Invalid SyncManager Settings shall only be tested for SyncManagers with Sm@Virtual = FALSE
_Solution: Do not check the number of Sms configured but limit to number of SyncManagers to those with Sm@Virtual = FALSE (based on the return value allPdSm of function GetAllPdSm)</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.2" Date="2012-06-20" Id="EN_TF-1200_120620_1" Type="Enhancement">_Where: #3, MbxHandlerStarted
_Description: Checks if mailbox handler was started even when ESI element Sm@Enable = FALSE
_Solution: Skip mailbox handler started check if Sm@Enable0 AND Sm@Enable1 are FALSE</HistoryEntry>
		<HistoryEntry Editor="RH" TestVersion="1.1.3" Date="2012-09-18" Type="Enhancement">- Add Reference to "EcBaseFunctions.xml" (including basic test functions)
- Reset function removed from local testfunction list
- Run Reset function before each test case to test if DuT is online (if offline test case will be skipped)
- Reset function within test cases is replaced by global reset function and set timeout values</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.3" Date="2013-03-25" Id="EN_TF-1200_130325_1" Type="Enhancement">_Where: TG4
_Description: Added #49</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.4" Date="2013-03-25" Id="EN_TF-1200_130325_2" Type="Enhancement">_Where: #49: 
_Description: Test was skipped
_Solution: Performe test</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.4" Date="2013-03-25" Id="EN_TF-1200_130325_3" Type="Enhancement">_Where: 4-0
_Description: Test #37 was copied and a skip function added in the beginning of the test (for development purposes)
_Solution: delete test case 4-0</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.5" Date="2013-06-14" Id="EN_TF-1200_130614_1" Type="Enhancement">_Where: 4-5 (#42)
_Description: When SM2 and SM3 are enable and the slave goes to ErrSafeOp the test does generate an error when SM2 is not deactivated by PDI side.
_Solution: Correct TestFunction "SmChannelDisabled"</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.6" Date="2014-01-09" Id="EN_TF-1200_140109_1" Type="Enhancement">_Where: 4-10 (#49)
_Description: no PD sent
_Solution: Add wait time so that CTT can send PD data before stopping to send PD data</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.6" Date="2014-01-09" Id="EN_TF-1200_140109_2" Type="Enhancement">_Where: 3-1 (#21)
_Description: Test does not support slaves that have Mbx-SyncManagers but not PD SyncManagers 
_Solution: Skip checking if Process Data Handler was stopped if no PD SyncManagers are defined in the ESI file (in function "LocalOutputHandlerStoppedI" and "LocalOutputHandlerStoppedInit")</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.7" Date="2014-01-13" Id="EN_TF-1200_140113_01" Type="Enhancement">_Where: 3-1 to 3-9 (#21-51.1)
_Description: Test does not support slaves that have Mbx-SyncManagers but not PD SyncManagers 
_Solution: Skip checking if Process Data Handler was stopped if no PD SyncManagers are defined in the ESI file (in function "InOutputHandlerStarted")</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.7" Date="2014-01-13" Id="EN_TF-1200_140113_02" Type="Bug">_Where: 4-5 ('42)
_Description: test does not detect that the slave with SM2 and SM3 enabled does not deactivate SyncManager2 or SyncManager3 when going to SafeOpErr 
_Solution: Test Function  "SmChannelDisabled" 23rd step: if SM3 is not deactivated (i.e. 1) an error shall be raised (fix "smDisabled equal false" to "smDisabled equal true")</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.8" Date="2014-01-14" Id="EN_TF-1200_140114_01" Type="Enhancement">_Where: 4-10 (#49)
_Description: Slaves that do not have any Process Data SyncManagers are not skipped
_Solution: Check if noOutputSm = True and skip test</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-15" Id="EN_TF-1200_140115_01" Type="Enhancement">_Where: test function "SmChannelDisabled" 
_Description:  Additional info output added</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_01" Type="Enhancement">_Where: 4-10 (#49)
_Description:  Change the WD requirements to adopt to real implementations: there are still small controllers which have a 30ms. In addition the reaction as to set outputs to safe state and to inform this via the state machine are two steps
_Solution: Wait for WdTime+10% and generate Warning if no reaction. Generate Error if no WD-expired error returned on ESM after twice the WD time</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_02" Type="Enhancement">_Where: TestFunction "AlStatus.Code
_Description: Function moved to BF-12xx and function calls in test file adopted. New function name ist VerifyAlStatusAndAlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_03" Type="Enhancement">_Where: TestFunction "AlStatusCode
_Description: Function moved to BF-12xx and function calls in test file adopted. New function name ist VerifyAlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_04" Type="Enhancement">_Where: Test Functin VerifyAlStatusAndAlStatusCode
_Description: Name was change in BF-12xx to GetAndVerifyAlStatusAndAlStatusCode
_Solution: Adopt name in Test File</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_05" Type="Enhancement">_Where: Test Function CheckAlStatus.Code
_Description:  Function moved to BF-12xx and function calls in test file adopted. New function name is VerifyAlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-30" Id="EN_TF-1200_140130_06" Type="Enhancement">_Where: Test Function CheckForDuTEmulation
_Description:  Function moved to BF-12xx and function calls in test file adopted. New function name is SkipTestIfDuTEmulationActive</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-01-31" Id="EN_TF-1200_140131_01" Type="Enhancement">_Where: Test Function  CheckForNonDcMode
_Description: Function moved to BF-12xx and function calls in test file adopted. New function name is SkipTestIfCurrentConfigRequiresDcAndNoCu</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.9" Date="2014-02-07" Id="EN_TF-1200_140207_01" Type="Bug">#29, #30: function name VerifyAlStatusAndStatusCode wrong
_Solution: use correct name VerifyAlStatusAndAlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.11" Date="2014-02-26" Id="EN_TF-1200_140226_01" Type="Enhancement">_Where: test function "SetWrongSmSettings"
_Description: If Bootstrap element in ESI file available but no Sm element a serious error occurs
_Solution: verify if Sm element available and generate error if not</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.12" Date="2014-02-28" Id="EN_TF-1200_140228_01" Type="Enhancement">_Where: test function "SetStateMachTimeout" moved to BF-12xx. New name "SetEsmTimeouts"</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.12" Date="2014-03-07" Id="EN_TF-1200_140307_01" Type="Enhancement">DefaultValue of Settings.bAll_esm_overwriteTimeouts changed to false</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.14" Date="2014-06-23" Id="EN_TF_1200_140623_1" Type="Bug">_Where: TestFunction "AlStatusCode"
_Description: In the logger output the value of the "Read AL Status Code" was the fexpectedAlStatusCode2
_Solution: use Param2=AlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.14" Date="2014-06-23" Id="EN_TF_1200_140623_2" Type="Bug">_Where: TestFunction "CheckAlStatus.Code"
_Description: In the logger output the value of the "Read AL Status Code" was the fexpectedAlStatusCode2
_Solution: use Param2=AlStatusCode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.14" Date="2014-06-23" Id="EN_TF_1200_140623_3" Type="Enhancement">_Where: VerifyAlStatusCode
_Description: Added AlStatus and AlStateNext to parameters</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.15" Date="2014-06-27" Id="EN_TF_1200_140627_1" Type="Enhancement">Deleted repetitive setting of SetEsmTimeouts</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.16" Date="2014-07-03" Id="EN_TF_1200_140703_1" Type="Enhancement">Replaced all "," with "," to support Comma separted outputs</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.16" Date="2014-07-09" Id="EN_TF_1200_140709_1" Type="Bug">_Wherer: TC #3, #5 function call VerifyAlStatusCode
_Description: value as parameter not allowed
_Solution: use variable</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.19" Date="2014-10-22" Id="EN_TF_1200_141022_1" Type="Enhancement">_Wherer: #11.2c, #17
_Description: PreOp-SafeOp start-up-commands are sent also for ErrPreOp-SafeOp transition (with ErrAck = 0). There are no such start-up commands. Also, for PreOp-Op state transition no start-up commands are sent. 
_Solution: delete sending PreOp-SafeOp start-up commands for ErrorPreOp-SafeOp transition</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.20" Date="2014-11-20" Type="Enhancement">_Where: #49
_Description: For slaves using DC addtional AL Status Codes 0x1A, 0x33, 0x34 may be returned
</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.20" Date="2014-11-24" Type="Enhancement">Replace SkipTestIfDcOnlyAndNoCu by SkipTestIfCurrentConfigRequiresDcAndNoCu to fix check if test can be performed without realtime-enabling hardware</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.21" Date="2014-12-05" Type="Enhancement">Delete unused functions AlStatus.Code, AlStatusCode, CheckAlStatus.Code, CheckForDuTEmulation, CheckForNonDcMode</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.21" Date="2014-12-05" Type="Enhancement">Editorial changes of test documentation</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.22" Date="2014-12-05" Type="Enhancement">Replace MbxHandlerStarted with CheckIfMbxHandlerStarted and MbxHandlerStarted deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.23" Date="2014-12-05" Type="Enhancement">Replace MbxHandlerStopped with CheckIfMbxHandlerStopped and MbxHandlerStopped deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.24" Date="2015-01-19" Type="Enhancement">_Wherer: #11.2c, #17
_Description: turn back EN_TF_1200_141022_1, i.e. send start-up commands, generate warning instead of error if start-up commands are aborted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.25" Date="2015-02-02" Type="Bug">_Where: #21
_Description: test function MbxHandlerStopped was replaced but still called
_Solution: delete MbxHandlerStopped </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.26" Date="2015-02-12" Type="Enhancement">_Where: #5
_Description: test repeatedly sets slave to init (step 1, step 11, step 13) 
_Solution: delete Reset in step 11 and RequestInit in 13)</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.26" Date="2015-02-12" Type="Enhancement">_Where: several test cases
_Description: test repeatedly sets slave to init using Reset function 
_Solution: delete repeatedly called reset function</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.27" Date="2015-02-13" Type="Enhancement">_Where:11.2C, 17
_Description: The starting state of the test is ErrPreOp. For slaves which require PreOp-SafeOp start-up commands those cannot be sent.
_Solution: Skip part of test when Preop-SafeOp start-up commands are required </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.30" Date="2015-02-13" Type="Bug">_Where: #45
_Description: ESM Timeouts are not initialized (init is skipped)
_Solution: Init ESM timeouts</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.31" Date="2015-02-19" Type="Enhancement">_Where: TestFunctions
_Description: Test function SetStateMachTimeout not used any more and therefore, deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.31" Date="2015-02-19" Type="Enhancement">_Description: Replace local function SetSm01Boot with external SetBootstrapMbxSyncManSettings and delete SetSm01Boot</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.31" Date="2015-02-20" Type="Enhancement">_Description: Replace local function GetAllOutputSm with GetAllOutputSyncMan in GetAllEnabledOutputSm</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.32" Date="2015-02-23" Type="Bug">_Where: Test Function "GetAllEnabledOutputSm" 
_Description: calls function with wrong name (GetAllOutputSyncManager instead of GetAllOutputSyncMan)
_Solution: Use GetAllOutputSyncMan</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.33" Date="2015-02-23" Type="Enhancement">_Where: GetAllEnabledInputSm
_Description:  Replace local function GetAllInputSm with GetAllInputSyncMan </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.33" Date="2015-02-24" Type="Enhancement">_Where: function GetAllPdSm
_Description: replace GetAllInputSm with GetAllInputSyncMan and GetAllOutputSm with GetAllOutputSyncMan</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.33" Date="2015-02-24" Type="Enhancement">_Where: function GetAllEnabledInputSm is not called anywhere
_Solution: delete functin</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.33" Date="2015-02-24" Type="Enhancement">_Where: function LocalOutputHandlerStarted was never called anywherer
_Solutoin: Delete</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.34" Date="2015-03-02" Type="Enhancement">_Where: functions GetAllEnabledSm, SmChannelDisabled
_Description: replace local function "CheckIfSmEnabled" with external function CheckIfSyncManEnabled</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.35" Date="2015-03-02" Type="Enhancement">_Where: #37
_Description: delete GetListOfAllEnabledSm_InPreOP</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.35" Date="2015-03-02" Type="Enhancement">_Where: Function LocalOutputHandlerStoppedInit replaced by external function LocalOutputHandlerStoppedInInit and deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.35" Date="2015-03-02" Type="Enhancement">Where: Function LocalOutputHandlerStopped replaced by LocalOutputHandlerStoppedInfo and deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.35" Date="2015-03-02" Type="Enhancement">Where: #46
Description: Replace "GetListOfAllEnabledSm" with GetListOfEnabledInputOrOutputSm</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.36" Date="2015-03-02" Type="Enhancement">Delete function CheckIfSmEnabled, GetAllInputSm</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.37" Date="2015-03-03" Type="Enhancement">_Where: GetAllEnabledOutputSm
_Description: Replaced GetAllEnabledSm with ExtractAllEnabledSm </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.37" Date="2015-03-04" Type="Enhancement">_Where: GetAllEnabledPdSm
_Description: Replaced GetAllEnabledSm with ExtractAllEnabledSm </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">Delete function GetAllEnabledOutputSm (replaced with ExtractAllEnabledSm)</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: function SetSmSettingsAccToPdoLength, GetAllEnabledPdSm, #45
_Description: replace GetAllPdSm with GetListOfAllPdSm. Delete GetAllPdSm</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: function InOutputHandlerStarted, InOutputHandlerStopped, SmChannelDisabled
_Description: replace GetAllEnabledPdSm with GetListOfAllEnabledSm and delete GetAllEnabledPdSm</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: #25.1
_Description: Replace InOutputHandlerStarted with VerifyInOutputHandlerStarted and InOutputHandlerStarted deleted</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: #24, #38, #45
_Description: Replace InOutputHandlerStopped with VerifyInOutputHandlerStopped and delete InOutputHandlerStopped </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: #22.1, 23, 32, 33, 37, 46
_Description: Replace InOutputHandlerStopped and InOutputHandlerStoppedInit with CheckIfInputAndOutputHandlerStopped. Delete InOutputHandlerStopped and InOutputHandlerStoppedInit</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: #24
_Description: Replace VerifyInOutputHandlerStarted with (GetListOfAllEnabledSm+CheckIfInputAndOutputHandlerStopped)</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.38" Date="2015-03-05" Type="Enhancement">_Where: #11.2C, 17
_Description: Replace SetSmSettingsAccToPdoLength with SetSyncManSettingsAccToPdoLength
Delete function SetSmSettingsAccToPdoLength</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.39" Date="2015-03-05" Type="Enhancement">_Where: #4,6,10,17,20.2, 21.31.2, 32, 33, 45, 46
_Description: Replace SetWrongSmSettings with SetWrongSyncManSettings and delete SetWrongSmSettings </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.39" Date="2015-03-05" Type="Enhancement">_Where: #42, 43, 49
_Description: Replace SmChannelDisabled with VerifySyncManChannelDisabled and delete SmChannelDisabled </HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.40" Date="2015-03-12" Type="Enhancement">Purpose in test description added. Documentation for TF-1200 and TF-1201 merged, init values statevalue for TF-1201 in #5, #6 fixed</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.41" Date="2015-03-13" Type="Enhancement">_Where: #4
_Description: Add missing reset with ACk=0</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.43" Date="2015-03-19" Type="Enhancement">_Where: #5,6,7
_Description: fix check for Bootstrap supported</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.44" Date="2015-03-24" Type="Bug">#7: Test performed even though Bootstrap supported</HistoryEntry>
		<HistoryEntry Editor="FH" TestVersion="1.1.44" Date="2015-03-24" Type="Bug">#3: Remove additional AL Status Code check after VerifyAlStatusCode was called when Ack = 1</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.45" Date="2015-09-01" Type="Enhancement">Update to Schema Version 1.0.23</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.46" Date="2015-11-03" Type="Enhancement">Several typos in description and outputs fixed</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.47" Date="2015-11-16" Type="Enhancement">Added Test Case Device:Eeprom:AssignToPdi to Test Group 1 (was moved freom TF-1300)</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.48" Date="2015-12-11" Type="Bug">Where: 1-16
Description: check of state request did not catch the expcted rejection of state transition</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.48" Date="2016-01-21" Type="Bug">Where: #33
Description: DuT was not reset again after PDO description was read and before actual test started
Solution: Reset</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.49" Date="2016-01-22" Type="Enhancement">Where: 1-16
Description: Added SkipForTf1201SinceNotExplDevIdSpecific</HistoryEntry>
		<HistoryEntry Editor="BL" TestVersion="1.1.50" Date="2016-02-17" Id="EN_TF_1200_160217" Type="Enhancement">Update to Schema version 1.0.24</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.51" Date="2016-05-24" Type="Enhancement">Add support for complex slaves which do not have mailbox SyncManagers:
- Skip test cases which check SM01 settings
- Skip check of MbxHandlerStarted and MbxHandler stopped</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.53" Date="2016-06-09" Type="Bug">Add support for complex slaves which do not have mailbox SyncManagers:
- Skip test cases which check disabled SM01 settings (#21, #33, #46)</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.1.54" Date="2016-07-05">Release version</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.0" Date="2016-09-30" Type="Enhancement">_Where: #49
_Description: Enhance test description with allowed Sync-error AL Status Codes</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.1" Date="2017-01-31" Type="Enhancement">_Where: Support for complex slaves wich do not have mailbox SyncManagers
_Description: This was partly added earlier, now completed and documented</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.1" Date="2017-05-03" Type="Enhancement">_Where: #17
_Description: Update logger output to indicate which SM is tested next</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.2" Date="2017-06-21" Type="Bug">_Where: #49
_Description: Correct Description: MailboxSyncManager and Input SyncManager are not disabled</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.3" Date="2017-08-28" Type="Enhancement">_Description: Typo corrected</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.3" Date="2017-08-28" Type="Bug">_Where: #49
_Description: Reaction in case of WD error cannot be within the WD time. The slave shall change its state from Op to ErrSafeOp within the BackToSafeop timeout time after detecting that the WD did expire</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.4" Date="2017-08-30" Type="Bug">_Where: #49
_Description: Set local variable backToSafeOp, outputs updates</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.4" Date="2017-10-28" Type="Bug">Where: all OP to any test cases
Description: Check if DcSpecificTest</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.5" Date="2017-10-30" Type="Enhancement">Where: all OP to any test cases
Description: Remove PerformAnyways option - outdated since realtime-enabling hardware available</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.6" Date="2018-01-22" Type="Enhancement">Where: #10, 20.2, 31.2
Description: Add support for Sm@virtual </HistoryEntry>
		<HistoryEntry TestVersion="1.2.11" Date="2018-09-07" Type="Enhancement" Editor="DO">Changed Settings user control path to components name</HistoryEntry>
		<HistoryEntry TestVersion="1.2.12" Date="2018-09-14" Editor="BL" Type="Enhancement">Add output IDs and update Schema version to 1.0.31</HistoryEntry>
		<HistoryEntry TestVersion="1.2.13" Date="2018-09-18" Editor="FE" Type="Enhancement">_Where: OP to PREOP state change test cases #38
_Description: used 3000ms timeout time rather than 5000ms ( SAFEOP-PREOP timeout)
_Solution:Use backInitTimeout with 5000ms</HistoryEntry>
		<HistoryEntry Editor="FE" TestVersion="1.2.14" Date="2018-11-09" Type="Enhancement">_Where: #17
_Description: Hard-coded register read access for debugging to SyncMan-registers caused error when SyncMan not support
_Solution: make Debug-Read depend on available SyncMan in called test action</HistoryEntry>
		<HistoryEntry TestVersion="1.2.15" Date="2018-11-12" Editor="F.L." Type="Enhancement">TestGroup 4, TestCase 8, WriteLine 14: Changed Param2 to Param0. TestGroup 4, TestCase 9, WriteLine 12: Changed Param2 to Param0.</HistoryEntry>
		<HistoryEntry TestVersion="1.2.16" Date="2018-12-12" Editor="FE" Type="Enhancement">Update of BF-12xx (V0.0.32)</HistoryEntry>
		<HistoryEntry Date="2019-01-17" Editor="FE" TestVersion="1.2.17" Type="Enhancement">_Where: #17, #45
_Description: In case unkonwn Sm Types were betwee PdSm, the test did manipulate those, too.
_ Solution: Manipulation of SyncManager listed in PdSm only</HistoryEntry>
		<HistoryEntry Date="2019-05-02" Editor="FE" TestVersion="1.2.18" Type="Enhancement">Set version to 1.3.0 for release</HistoryEntry>
	</History>
	<TestVariables>
		<TestVariable>
			<Name>t_preopTimeout</Name>
			<Type>Int32</Type>
			<DefaultValue>3000</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.bAll_debugMsg</Name>
			<Type>Bool</Type>
			<DefaultValue>false</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.b04_10_WarningAccepted</Name>
			<Type>Bool</Type>
			<DefaultValue>false</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.bAll_esm_overwriteTimeouts</Name>
			<Type>Bool</Type>
			<DefaultValue>false</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.int32_all_esm_preOPTimeout</Name>
			<Type>Int32</Type>
			<DefaultValue>3000</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.int32_all_esm_safeOPTimeout</Name>
			<Type>Int32</Type>
			<DefaultValue>10000</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.int32_all_esm_backSafeOPTimeout</Name>
			<Type>Int32</Type>
			<DefaultValue>200</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>Settings.int32_all_esm_backInitTimeout</Name>
			<Type>Int32</Type>
			<DefaultValue>5000</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>bool_tf1201</Name>
			<Type>Bool</Type>
			<DefaultValue>false</DefaultValue>
		</TestVariable>
		<TestVariable>
			<Name>uint32_idValue</Name>
			<Type>UInt32</Type>
			<DefaultValue>5</DefaultValue>
		</TestVariable>
	</TestVariables>
	<Variables>
		<Variable>
			<Name>byteAssignToEcat</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>bSkipPartOfTest</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>bAssignToPdi</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>uint16ArrayExpectedAlStatusCodes</Name>
			<Type>ArrayOfUInt16</Type>
		</Variable>
		<Variable>
			<Name>bMakeWdTestFail</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>uint32_lengthOfList</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_sizeOfAllPdSm</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint64_wdPdTime</Name>
			<Type>Int64</Type>
		</Variable>
		<Variable>
			<Name>uint64_wdPdInclJitter.settings</Name>
			<Type>Int64</Type>
		</Variable>
		<Variable>
			<Name>uint64_wdPdPlusBackToSafeopTimeout</Name>
			<Type>Int64</Type>
		</Variable>
		<Variable>
			<Name>int32_backToSafeopTimeout</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>a</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>b</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>c</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>lastPdSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>AckFlag</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>aInputData</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>alControl</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>alEventRequestReg</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>alEventRequestReg.SmActChg</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>allEnabledInputSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allEnabledOutputSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allEnabledPdSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allEnabledSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allInputSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allOutputSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allPdSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allSm</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>allSmRegisters</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>alStatus</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>alStatus.Code</Name>
			<Type>ArrayOfUInt16</Type>
		</Variable>
		<Variable>
			<Name>alStatusCode</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>alStatusCode1</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>alStatusCode2</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>assignActivate</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>assignToEcat</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>assignToPdi</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>backInitTimeout</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>backSafeOPTimeout</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>bool</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>boolVar</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>byte</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>byte_opModeNo</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>byteVar</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>byteVar1</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>bWarning</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>dcActivation</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>dcAvailable</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>dcSyncOut</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>dcSyncOutUnit</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>defaultPdLength</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>defaultPdoLength</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>devEm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>enabledInputSmCount</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>enabledOutputSmCount</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>enabledPdSmCount</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>enabledSmCount</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>errAck</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>escFeatures</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>escRevision</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>escType</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>expectedAlStatusCode</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>expectedAlStatusCode2</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>expectedAlStatusCode3</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>faInputData</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>falControl</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>falControlErrorFlag</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>falStatus</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>falStatusCode</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>farraySize</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fassignActivate</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>fbyteVar</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fescFeatureReg</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fexpectedAlStatusCode2</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>fexpectedAlStatusCode3</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>ffirstDcOpMode</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>ffirstDcOpModeNo</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>firstInputSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>firstOutputSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fmmuClearData</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>fmmuSync</Name>
			<Type>Register</Type>
		</Variable>
		<Variable>
			<Name>fopModeCounter</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fpdiCntrlSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fpdiCntrlSmActivation</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>fpdiControlSm0</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fpdiControlSm1</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fpdiControlSm2</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fpdiControlSm3</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>fsm0Deactivated</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>fsm1Deactivated</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>fsm2Deactivated</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>fsm3Deactivated</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>fuInt32Var</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>index</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>index32</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>index8</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>initArray</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>inputSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>inputSmCount</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>inputSmEnable</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>inputSyncMan</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>inputSyncManDisabled</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>int32</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>mbxProtocolSupported</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>mbxSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>noEnabledInputSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noEnabledOutputSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noEnabledPdSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noEnabledSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noInputs</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noInputSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noOutputs</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noOutputSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>noPdSm</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>nullByte</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>nullWord</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>offset</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>otherSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>outputSmCount</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>outputSmEnable</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>outputSyncMan</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>pdiCntrlSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>pdiCntrlSmActivation</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>pdiCtrl</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>pdSm</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>pdSmCount</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>preOPTimeout</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>safeOPTimeout</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>skipTestCase</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>SM0Length</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>SM0StartAddress</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>SM1Length</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>SM1StartAddress</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>sm2Control</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>sm2Deactivate</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>sm3Control</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>sm3Deactivate</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smActivate</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smActivateInt</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smAdo</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>smClearData</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>smControl</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smControlType</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smCount</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>smDeactivate</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smDirection</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smDirection2Bit</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smDisabled</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smEnable</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>smNo</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smNumber</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smOperationMode2Bit</Name>
			<Type>Byte</Type>
		</Variable>
		<Variable>
			<Name>smSettings</Name>
			<Type>ArrayOfBytes</Type>
		</Variable>
		<Variable>
			<Name>smStartAddress</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>smStartAddressWrong</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>smText</Name>
			<Type>String</Type>
		</Variable>
		<Variable>
			<Name>smType</Name>
			<Type>String</Type>
		</Variable>
		<Variable>
			<Name>smVirtual</Name>
			<Type>Bool</Type>
		</Variable>
		<Variable>
			<Name>stateValue</Name>
			<Type>Int32</Type>
		</Variable>
		<Variable>
			<Name>stateValueNext</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uInt16</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uint16_dcActivation</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uint16_dcLatchCfg</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uint16_wdDiv</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uint16_wdPd</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uInt16Val</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uInt16Var</Name>
			<Type>UInt16</Type>
		</Variable>
		<Variable>
			<Name>uInt32</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcStartTimeHigh</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcStartTimeLow</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcSync0CycleTime</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcSync1CycleTime</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcSysTimeDelay</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcSysTimeHigh</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint32_dcSysTimeLow</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uInt32Val</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uInt32Var</Name>
			<Type>UInt32</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcStartTime</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcSysTime</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcSysTimeDiff</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcSysTimeHigh</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcSysTimeLow</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_dcSysTimeOffset</Name>
			<Type>UInt64</Type>
		</Variable>
		<Variable>
			<Name>uint64_wdPdInclJitter</Name>
			<Type>UInt64</Type>
		</Variable>
	</Variables>
	<EcatCmdGrps></EcatCmdGrps>
	<TestUserControl>CttTestUserControl.TF12xx_Settings.TestSettingsUserControl</TestUserControl>
	<IncludedTestFunctions>
		<FileName>EcBaseFunctions_V1i0i0.xml</FileName>
		<FileName>BF-12xx_V1i0i0_EsmBaseFunctions.xml</FileName>
	</IncludedTestFunctions>
	<TestFunctions>
		<TestFunction Name="SetEsmTimeouts" FunctionId="101">
			<?MAX_OUTPUT_ID 2?>
			<TestStep Name="SetPreOpTimeout">
				<CallTestFunction Name="SetPreOpTimeout">
					<Parameter>Settings.bAll_debugMsg</Parameter>
					<OutParameter>preOPTimeout</OutParameter>
				</CallTestFunction>
			</TestStep>
			<TestStep Name="SetSafeOpTimeout">
				<CallTestFunction Name="SetSafeOpTimeout">
					<Parameter>Settings.bAll_debugMsg</Parameter>
					<OutParameter>safeOPTimeout</OutParameter>
				</CallTestFunction>
			</TestStep>
			<TestStep Name="SetBackSafeOpTimeout">
				<CallTestFunction Name="SetBackSafeOpTimeout">
					<Parameter>Settings.bAll_debugMsg</Parameter>
					<OutParameter>backSafeOPTimeout</OutParameter>
				</CallTestFunction>
			</TestStep>
			<TestStep Name="SetBackInitTimeout">
				<CallTestFunction Name="SetBackInitTimeout">
					<Parameter>Settings.bAll_debugMsg</Parameter>
					<OutParameter>backInitTimeout</OutParameter>
				</CallTestFunction>
			</TestStep>
			<TestStep Name="WriteTimeoutsToLogger">
				<WriteLine Id="0" Level="Verbose" Param0="preOPTimeout" Param1="safeOPTimeout" Param2="backSafeOPTimeout" Param3="backInitTimeout">ESM timeouts in [ms] | preOPTimeout = {0} | safeOPTimeout = {1} | backSafeOPTimeout = {2} | backInitTimeout = {3}</WriteLine>
			</TestStep>
			<TestStep Name="CHECK_IF_TIMEOUTS_OVERWRITTEN_BY_SETTINS">
				<Compare>
					<Equal>
						<Value1>Settings.bAll_esm_overwriteTimeouts</Value1>
						<Value2>false</Value2>
						<Return Id="1"></Return>
					</Equal>
				</Compare>
			</TestStep>
			<TestStep Name="overwrite_preOPTimeout">
				<!--Set ESI timeout values

Init-> PreOp
Boot->Init-->
				<SetVariable Target="preOPTimeout">Settings.int32_all_esm_preOPTimeout</SetVariable>
			</TestStep>
			<TestStep Name="overwrite_safeOPTimeout">
				<!--SafeOp -> Op
PreOp -> SafeOp-->
				<SetVariable Target="safeOPTimeout">Settings.int32_all_esm_safeOPTimeout</SetVariable>
			</TestStep>
			<TestStep Name="overwrite_backSafeOPTimeout">
				<!--Op -> Safeop-->
				<SetVariable Target="backSafeOPTimeout">Settings.int32_all_esm_backSafeOPTimeout</SetVariable>
			</TestStep>
			<TestStep Name="overwrite_backInitTimeout">
				<!--Op/SafeOp->Init
SafeOp->Preop-->
				<SetVariable Target="backInitTimeout">Settings.int32_all_esm_backInitTimeout</SetVariable>
				<Compare>
					<Equal>
						<Value1>Settings.bAll_debugMsg</Value1>
						<Value2>true</Value2>
						<WriteLine Id="2" Param0="Settings.int32_all_esm_preOPTimeout" Param1="Settings.int32_all_esm_safeOPTimeout" Param2="Settings.int32_all_esm_backSafeOPTimeout" Param3="Settings.int32_all_esm_backInitTimeout">ESM Timeouts (partly) overwritten by settings dialog value | preOPTimeout = {0} | safeOPTimeout  (S&gt;O, P &gt; S) = {1} | backSafeOPTimeout ( O &gt; S) = {2} | backInitTimeout = {3}</WriteLine>
					</Equal>
				</Compare>
			</TestStep>
		</TestFunction>
	</TestFunctions>
	<TestGroups>
		<TestGroup Name="Test Cases from Init to Any" GroupId="1">
			<Comment>All test cases starting at Init State</Comment>
			<TestCase Name="#1.1 Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x01" CaseId="1">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT confirms state request from ErrorInit to Init with AL Control = 0x01
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- ESM state, SyncManager, FMMU, DC registers are reset
- State Machine Timeouts are set to values specified in ESI, otherwise to deafault values
- DuT in ErrorInit (Error Flag = 1)</PreCondition>
					<Action>IF TF-1200: State request to Init with AL Control = 0x01 (AckFlag = 0)
IF TF-1201: State request to PreOp with AL Control = 0x22 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- The acknowledgement of an error without setting the AckFlag to 1 is exclusively possible for a state request to Init.</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.1"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset DuT (if offline test will skipped)-->
					<Description Id="0" Level="Output">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">0</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3">Set to ErrorInit (AL Status = 0x11)</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<Description Id="5">Request Init (AL Control = 0x01)</Description>
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8">Check AL Status (0x013) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#1.2A Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x02" CaseId="2">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorInit to PreOp with AckFlag = 0 (i.e.  AL Control = 0x02)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- ESM state, SyncManager, FMMU, DC registers are reset
- State Machine Timeouts are set to values specified in ESI, otherwise to deafault values
- DuT in ErrorInit (Error Flag = 1)
- Read current AL Status Code. This code shall not be changed after the state request to PreOp
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to PreOp with AL Control = 0x02 (AckFlag = 0)
IF TF-1201: State request to PreOp with AL Control = 0x22 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorInit
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init assignToPdi-->
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--TF-1201: 
- stateValue = 0x22-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3">Set DuT to ErrorInit (AL Status = 0x11)</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="5" Level="Verbose">Read AL Status Code from DuT regiser 0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="7" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="8">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<Description Id="9" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</Description>
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="10" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x.{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#1.2B Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl= 0x03" CaseId="3">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorInit to Boot with AckFlag = 0 (i.e.  AL Control = 0x03)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorInit (Error Flag = 1)
- Assign EEPROM access to PDI</PreCondition>
					<Action> TF-1200: State request to Boot with AL Control = 0x03 (AckFlag = 0)
 TF-1201: State request to Boot with AL Control = 0x23 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorInit
- ErrFlag remains 1 (no acknowlegement of error)
- IdFlag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init assignToPdi-->
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3" Level="Output">Set DuT to ErrorInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="5" Level="Verbose">Read AL Status Code from DuT (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="7" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="8">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<Description Id="9" Level="Verbose" Param0="errAck">Request Init with ErrAck = {0}</Description>
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="10" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#1.2C Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl= 0x04" CaseId="4">
				<?MAX_OUTPUT_ID 10?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorInit to SafeOp with AckFlag = 0 (i.e.  AL Control = 0x04)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorInit (Error Flag = 1)
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to SafeOp with AL Control = 0x4 (AckFlag = 0)
IF TF-1201: State request to SafeOp with AL Control = 0x4 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorInit
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--TF-1201: 
- stateValue = 0x24-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3" Level="Output">Set DuT to ErrorInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="5" Level="Verbose">Read AL Status Code from DuT (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="7" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="8" Param0="stateValue" Param1="errAck" Level="Verbose">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#1.2D Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl= 0x08" CaseId="5">
				<?MAX_OUTPUT_ID 10?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorInit to Op with AckFlag = 0 (i.e.  AL Control = 0x08)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorInit (Error Flag = 1)
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to Op with AL Control = 0x08 (AckFlag = 0)
IF TF-1201: State request to Op with AL Control = 0x08 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorInit
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3" Level="Output">Set DuT to ErrorInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="5" Level="Verbose">Read AL Status Code from DuT (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="7" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="8" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#1.2E Init &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl= unknown" CaseId="6">
				<?MAX_OUTPUT_ID 10?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorInit to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorInit (Error Flag = 1)
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF1200: State request to unknown state with AL Control = 0x6 (AckFlag = 0)
IF TF-1201: State request to unknown state with AL Control = 0x06 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorInit
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #1.2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = unknwon-->
					<SetVariable Target="stateValue">#x06</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="3" Level="Verbose">Set DuT to ErrorInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="5" Level="Verbose">Read AL Status Code from DuT (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="7" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="8" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#2 Init &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x01" CaseId="7">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT confirms state request from Init to Init state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorInit to Init with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Init
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to Init with either Ack Flag 0 or 1
IF Tf-1201: State request to Init with either Ack Flag 0 or 1, IdRequest = 1</Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #2"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="3">Reset DuT before actual test starts (with AckFlag = 0)</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset DuT before actual test starts (with AckFlag = 1)</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="9" Level="Verbose">Set DuT to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#3 Init &gt; PreOp, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x02, SmSett01 match" CaseId="8">
				<?MAX_OUTPUT_ID 21?>
				<Description>
					<Purpose>Check that DuT confirms state request from Init to PreOp state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorInit to PreOp with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Init
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)
- Mailbox SyncManager settings (SyncManager 0 and SyncManager 1) match the ESI description
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to PreOp with either Ack Flag 0 or 1
IF Tf-1201: State request to PreOp with either Ack Flag 0 or 1, IdRequest = 1</Action>
					<PostCondition>- DuT goes to PreOp
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Mailbox Handler is started, i.e. the "Deactivate SyncManger" bit of Register "PDI Control SyncManager" (+0x07.0) has to be false for SM0 (0x0807.0) and SM1 (0x0807.0). This is only tested when Mailbox-SyncManagers have a length of 0 or are disabled</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #3"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Reset">
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="SkipTestIfDeviceEmulationActive">
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep Name="SetEsmTimeouts">
					<Description Id="2" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep Name="InitAssignToPdi">
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep Name="InitAssignToEcat">
					<SetVariable Target="assignToEcat">#x00</SetVariable>
				</TestStep>
				<TestStep Name="StateValue_eq_0x02">
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep Name="StateValueNext_eq_0x02">
					<SetVariable Target="stateValueNext">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22
- stateValueNext = 0x22
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="ExpectedAlStatsuCode_eq_0x00">
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep Name="ACK_eq_0">
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep Name="SetMailboxSyncManSettings">
					<Description Id="3" Level="Verbose">Set Mailbox SyncManagers</Description>
					<CallTestFunction Name="SetMailboxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep Name="assigneEepromToPdi">
					<Description Id="4" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="5">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="Init_to_StateValue">
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="EVENT0">
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep Name="VerifyAlStatusCode">
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfMbxHandlerStarted">
					<Description Id="9" Level="Verbose">Check if Mailbox handler was started |  i.e. the "Deactivate SyncManger" bit of Register PDI Control SyncManager (+0x07.0) has to be false for SM0 and SM1</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStarted">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Successful">
					<WriteLine Id="10" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep Name="ACK_eq_1">
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep Name="ACK1_Reset">
					<Description Id="11">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="ACK1_ErrInit">
					<Description Id="12" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="13">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="ACK1_SetMailboxSyncManSettings">
					<Description Id="14" Level="Verbose">Set Mailbox SyncManagers</Description>
					<CallTestFunction Name="SetMailboxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep Name="ACK1_assigneEepromToPdi">
					<Description Id="15" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="16">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="ErrInit_to_StateValue">
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="17" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="EVENT1">
					<WriteLine Id="18" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep Name="ACK1_VerifyAlStatusCode">
					<Description Id="19" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="ACK1_MbxHandlerStarted">
					<Description Id="20" Level="Verbose">Check if Mailbox handler was started |  i.e. the "Deactivate SyncManger" bit of Register PDI Control SyncManager (+0x07.0) has to be false for SM0 and SM1</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStarted">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="ACK1_Successful">
					<WriteLine Id="21" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#4 Init &gt; Init,  ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x02, SmSett0 or SmSett1 not match" CaseId="9">
				<?MAX_OUTPUT_ID 24?>
				<Description>
					<Purpose>Check that DuT reject state request with invalid mailbox SyncManager settings from Init to PreOp state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorInit to PreOp with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)
- Mailbox SyncManager supported
- Mailbox SyncManager settings for SyncManager 0 or SyncManager 1 does not match the ESI description
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to PreOp with either Ack Flag 0 or 1
IF Tf-1201: State request to PreOp with either Ack Flag 0 or 1, ID Request = 1</Action>
					<PostCondition>- DuT goes to Error Init, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x16</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #4"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfComplexDevButNoMbxSyncManagers-->
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="2">SKIP | No MailboxOut SyncManager configured in ESI file, i .e. device does not support mailboxes</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<Description Id="3" Level="Verbose">Set ESM Timeout values</Description>
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init assignToPdi-->
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init assignToEcat-->
					<SetVariable Target="assignToEcat">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x16-->
					<SetVariable Target="expectedAlStatusCode">#x16</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="4" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="5">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetMailboxSyncManSettings-->
					<Description Id="6" Level="Verbose">Set Mailbox SyncManagers</Description>
					<CallTestFunction Name="SetMailboxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="7" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="8" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="9" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="10" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="11" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x4}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="12">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="13" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="14">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="15" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="16">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetMailboxSyncManSettings-->
					<Description Id="17" Level="Verbose">Set Mailbox SyncManagers</Description>
					<CallTestFunction Name="SetMailboxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="18" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="19" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="20" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="21" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part successful-->
					<WriteLine Id="22" Param0="alStatus" Param1="alStatusCode" Param2="smNo" Level="Success">SUCCESSFUL for Sm{2}: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<SetVariable Target="smNo">smNo+1</SetVariable>
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<Return Id="23"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="24">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#5 Init &gt; Boot, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x03, Boot supported, SmSett01 match" CaseId="10">
				<?MAX_OUTPUT_ID 24?>
				<Description>
					<Purpose>Check that DuT confirms state request from Init to Boot state with AckFlag = 0 (i.e.  AL Control = 0x03) and from ErrorInit to Boot with AckFlag = 1 (i.e. AL Control = 0x13)
IF- Tf-1201: IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Check if DuT supports Bootstarp Mode (i.e. ESI element DuT:Eeprom:Bootstrap available), otherwise skip test
- Either Error Flag is 0 t(hen AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)
- Mailbox SyncManager settings (SyncManager 0 and SyncManager 1) match the ESI description element DuT:Eeprom:Bootstrap
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to Boot with either Ack Flag 0 ( AL Control = 0x03) or 1 (AL Control = 0x13)
IF TF-1201: State request to Boot with either Ack Flag 0 (AL Control = 0x23) or 1 (AL Control = 0x33) , ID Request = 1</Action>
					<PostCondition>- DuT goes to Boot state
- Error Flag = 0
- AL Status Code should be 0
- ID Flag = 0 (ID request shall be ignored)
- Mailbox Handler is started, i.e. the "Deactivate SyncManger" bit of Register "PDI Control SyncManager" (+0x07.0) has to be false for SM0 (0x0807.0) and SM1 (0x080F.0)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #5"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom</Value1>
							<Value2>false</Value2>
							<SkipCase Id="2">Bootstrap not supported (no ESI entry Eeprom) | Skip test </SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<Description Id="3" Level="Verbose">Skip test if bootstrap (ESI element Eeprom:Boostrap) not supported</Description>
					<SizeOf UInt32Var="uInt32Val">DeviceDescr.Eeprom.BootStrap</SizeOf>
					<Compare>
						<NotEqual>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<WriteLine Id="4" Level="Verbose">Bootstrap supported</WriteLine>
						</NotEqual>
					</Compare>
					<Compare>
						<Equal>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<SkipCase Id="5">Bootstrap not supported (no ESI entry Bootsrap) | Skip test </SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init assignToPdi-->
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init assignToEcat-->
					<SetVariable Target="assignToEcat">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x03-->
					<SetVariable Target="stateValueNext">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--SetBootstrapMbxSyncManSettings-->
					<Description Id="6" Level="Verbose">Set Mailbox SyncManagers for Bootstrap</Description>
					<CallTestFunction Name="SetBootstrapMbxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="7" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="8">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="9" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="10" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="11" Level="Output">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfMbxHandlerStarted">
					<Description Id="12" Level="Verbose">Check if Mailbox handler was started |  i.e. the "Deactivate SyncManger" bit of Register PDI Control SyncManager (+0x07.0) has to be false for SM0 and SM1</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStarted">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="13" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="15" Level="Verbose">Set DuT to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="16">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetBootstrapMbxSyncManSettings-->
					<Description Id="17" Level="Verbose">Set Mailbox SyncManagers for Bootstrap</Description>
					<CallTestFunction Name="SetBootstrapMbxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="18" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="19">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="20" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="21" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="22" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="ACK1_CheckIfMbxHandlerStarted">
					<Description Id="23" Level="Verbose">Check if Mailbox handler was started |  i.e. the "Deactivate SyncManger" bit of Register PDI Control SyncManager (+0x07.0) has to be false for SM0 and SM1</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStarted">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="24" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#6 Init &gt; Init, ErrFlag = 0 or Ack Flag = 1, AlCtrl = 0x03, Boot supported, SmSett0 or SmSett1 not match" CaseId="11">
				<?MAX_OUTPUT_ID 25?>
				<Description>
					<Purpose>Check that DuT rejects state request with invalid mailbox SyncManager settings from Init to Boot state with AckFlag = 0 (i.e.  AL Control = 0x03) and from ErrorInit to PreOp with AckFlag = 1 (i.e. AL Control = 0x13)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Check if DuT supports Bootstrap Mode (i.e. ESI element DuT:Eeprom:Bootstrap available), otherwise skip test
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)
- Mailbox SyncManager settings for SyncManager0 or SyncManager1 match the ESI description element DuT:Eeprom:Bootstrap
- Mailbox SyncManager settings for SyncManager0 (then SyncManagerSetting 1 match) or SyncManager1  (then SyncManagerSetting 0 match) do not match the ESI description element DuT:Eeprom:Bootstrap
- Assign EEPROM access to PDI</PreCondition>
					<Action>IF TF-1200: State request to Bootstrap with either Ack Flag 0 or 1
IF TF-1201: State request to Bootstrap with either Ack Flag 0 or 1, ID Request = 1</Action>
					<PostCondition>- DuT goes to Error Init, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x15</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #6"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom</Value1>
							<Value2>false</Value2>
							<SkipCase Id="2">Bootstrap not supported (no ESI entry Eeprom) | Skip test </SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<Description Id="3" Level="Verbose">Skip test if bootstrap (ESI element Eeprom:Boostrap) not supported</Description>
					<SizeOf UInt32Var="uInt32Val">DeviceDescr.Eeprom.BootStrap</SizeOf>
					<Compare>
						<NotEqual>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<WriteLine Id="4" Level="Verbose">Bootstrap supported</WriteLine>
						</NotEqual>
					</Compare>
					<Compare>
						<Equal>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<SkipCase Id="5">Bootstrap not supported (no ESI entry Bootsrap) | Skip test </SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init assignToPdi-->
					<SetVariable Target="assignToPdi">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init assignToEcat-->
					<SetVariable Target="assignToEcat">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x15-->
					<SetVariable Target="expectedAlStatusCode">#x15</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="6" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="7">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetBootstrapMbxSyncManSettings-->
					<Description Id="8" Level="Verbose">Set Mailbox SyncManagers for Bootstrap</Description>
					<CallTestFunction Name="SetBootstrapMbxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="9" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="10" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="11" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="12" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="13" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x4}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="15" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<ReturnOnFailure Id="16">Failed to run to ErrInit!</ReturnOnFailure>
				</TestStep>
				<TestStep>
					<!--assign EEPROM to PDI-->
					<Description Id="17" Level="Verbose">Assign EEPROM to PDI</Description>
					<WriteEscData Source="assignToPdi">
						<Address>#x500</Address>
					</WriteEscData>
					<RaiseErrorOnFailure Id="18">Failed to write register 0x0500 (assign EEPROM access to PDI)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetBootstrapMbxSyncManSettings-->
					<Description Id="19" Level="Verbose">Set Mailbox SyncManagers for Bootstrap</Description>
					<CallTestFunction Name="SetBootstrapMbxSyncManSettings"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="20" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="21" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<Description Id="22" Level="Verbose">Take back EEPROM access to ECAT.</Description>
					<WriteLine Id="23" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="24" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part successful-->
					<WriteLine Id="25" Param0="alStatus" Param1="alStatusCode" Param2="smNo" Level="Success">SUCCESSFUL for Sm{2}: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<SetVariable Target="smNo">smNo+1</SetVariable>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="# 7 Init &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl  = 0x03, Boot not supported " CaseId="12">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>Check that DuT rejects state request Init to Boot state when Boot is not supported with AckFlag = 0 (i.e.  AL Control = 0x03) and from ErrorInit to Boot with AckFlag = 1 (i.e. AL Control = 0x13)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Check if DuT does not support Bootstarp mode (i.e. ESI element DuT:Eeprom:Bootstrap available), otherwise skip test
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200: State request to  Bootstrap (AL Control = 0x03) with either Ack Flag 0 or 1
IF TF-1201: State request to  Bootstrap (AL Control = 0x03) with either Ack Flag 0 or 1, ID Request = 1</Action>
					<PostCondition>- DuT goes to Error Init, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x13</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #7"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom</Value1>
							<Value2>false</Value2>
							<SkipCase Id="2">Bootstrap not supported (ESI element Eeprom not available) | Skip test</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Boot supported ?-->
					<SizeOf UInt32Var="uInt32Val">DeviceDescr.Eeprom.BootStrap</SizeOf>
					<Compare>
						<Equal>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<WriteLine Id="3" Level="Verbose">Bootstrap no supported (ESI element Eeprom:BootStrap not available)</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<NotEqual>
							<Value1>uInt32Val</Value1>
							<Value2>0</Value2>
							<SkipCase Id="4">Bootstrap supported (ESI entry Eeprom:BootStrap present) | Skip test </SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep Name="BOOTSUPP">
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x13-->
					<SetVariable Target="expectedAlStatusCode">#x13</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="7" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="8" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="9">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="10" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="11">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="13" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="14" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="15" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="# 8 Init &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x04 or 0x08 " CaseId="13">
				<?MAX_OUTPUT_ID 24?>
				<Description>
					<Purpose>Check that DuT rejects state request Init to SafeOp or Op state with AckFlag = 0 (i.e.  AL Control = 0x04 or 08) and from ErrorInit to SafeOp or Op with AckFlag = 1 (i.e. AL Control = 0x14 or 18)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>a) State request to SafeOp with either AckFlag 0 or 1
b) State request to Op with either AckFlag 0 or 1
IF TF-1200: ID Request = 0
IF TF-1201: ID Request = 1</Action>
					<PostCondition>- DuT goes to Error Init, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x11</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #8"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x11-->
					<SetVariable Target="expectedAlStatusCode">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="2" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="3" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="4" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="5" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="6">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="7" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="8">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="9" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="10" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x28-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x28</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="13">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="14" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="15" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="16" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="17" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="18">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrInit-->
					<Description Id="19" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="20">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="21" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="22" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="23" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="24" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="# 9 Init &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl = unknown" CaseId="14">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check that DuT rejects state request Init to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06) and from ErrorInit to unknown with AckFlag = 1 (i.e. AL Control = 0x16)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Init
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200: State request to unknown state with either AckFlag 0 (AL Control = 0x06) or 1 (Al Control = 0x16)
IF TF-1201: State request to unknown state with either AckFlag 0 (AL Control 0x26) or 1 (AL Control = 0x36), IdRequest = 1</Action>
					<PostCondition>- DuT goes to Error Init, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x12</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #9"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue =Unknown (0x06)-->
					<SetVariable Target="stateValue">6</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x12-->
					<SetVariable Target="expectedAlStatusCode">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="2" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="3" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="4" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="5" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="6">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-->ErrInit-->
					<Description Id="7" Level="Verbose">Set device to ErrInit</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_INIT</State>
					</RunToState>
					<RaiseErrorOnFailure Id="8">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Init > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="9" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="10" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#10 Init &gt; Init, Sm_Change ignored" CaseId="15">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT ignores a change of any SyncManager while DuT is in Init state. 
(No TF-1201 Explcit Device ID specific testing)</Purpose>
					<PreCondition>- DuT in Init
- Mailbox SyncManager supported</PreCondition>
					<Action>- For each available SyncManager wrong SyncManager settings are set and enable SyncManager so that a SyncManager Change Event is indicated from the ESC to the host controller</Action>
					<PostCondition>- The pending SyncManager Change event is ignored (i.e. AL Status and AL Status Code shall be unchaged after the event) by the host controller</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #10"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--SkipTestIfComplexDevButNoMbxSyncManagers-->
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="1">SKIP | No MailboxOut SyncManager configured in ESI file, i .e. device does not support mailboxes</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="2">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="3" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--stateValueNext ?-->
					<ReadEscData Target="stateValueNext">
						<Address>#x130</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="4">Failed to read register 0x0130!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="5" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="6">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="7" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="8" Level="Output">EVENT: SM_Chg (wait for 3000ms until expected behaviour is checked)</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode2" Param2="smNo" Level="Success">SUCCESSFUL for SM{2}: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep Name="NEXTSM">
					<Description Id="11">NEXTSM</Description>
					<SetVariable Target="smNo">smNo+1</SetVariable>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<Return Id="12"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep Name="SkipIfVirtual">
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>null</Value2>
							<GotoStep>RESET</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<WriteLine Id="13" Level="Verbose" Param0="smNo">Skip test for Sm{0} since Flag "Sm@Virtual = True" in ESI</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<GotoStep>NEXTSM</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="RESET">
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="Device:Eeprom:AssignToPdi" CaseId="16">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>- If ESI attribute Device:Eeprom:AssignToPdi is true the slave should return an AL Status Code when the master does not assign the access to the PDI
- (No TF-1201 Explcit Device ID specific testing)</Purpose>
					<PreCondition>
- Device:Eeprom:AssignToPdi = TRUE</PreCondition>
					<Action>Set DuT to PREOP without granting EEPROM access</Action>
					<PostCondition>Slave may go to ERR-INIT and return AL Status Code = 0x0050. If slave does not do this a Warning is generated</PostCondition>
					<References>
						<Reference Specification="ETG.2000" Chapter=""></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="CHECK_IF_SUPPORTED">
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom</Value1>
							<Value2>False</Value2>
							<SkipCase Id="1">SKIP | Slave does not have the element Eeprom</SkipCase>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom.AssignToPdi</Value1>
							<Value2>null</Value2>
							<SkipCase Id="2">SKIP | Slave does not use the attribute AssignToPdi</SkipCase>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.Eeprom.AssignToPdi</Value1>
							<Value2>false</Value2>
							<SkipCase Id="3" Param0="DeviceDescr.Eeprom.AssignToPdi">SKIP | Attribute Eeprom@AssignToPdi = {0:b}</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset DuT (if offline test will skipped)-->
					<Description Id="4" Level="Output">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="SET_MBX_SM_IF_AVAILABLE">
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM.Count</Value1>
							<Value2>0</Value2>
							<GotoStep>INIT_ASSIGN_TO_ECAT</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>null</Value2>
							<RaiseError Id="5">INFO: No Sm:Text element defined in ESI for SyncManager0</RaiseError>
						</Equal>
					</Compare>
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<GotoStep>MBXIN</GotoStep>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--SM_SM_0-->
					<Description Id="6" Level="Verbose">Set SyncManager 0 settings according to ESI</Description>
					<SetSyncManagerSettings>
						<Number>0</Number>
						<Start>DeviceDescr.SM[0].StartAddress</Start>
						<Length>DeviceDescr.SM[0].DefaultSize</Length>
						<ControlByte>DeviceDescr.SM[0].ControlByte</ControlByte>
						<Enable>DeviceDescr.SM[0].Enable</Enable>
					</SetSyncManagerSettings>
					<RaiseErrorOnFailure Id="7">Failed to set SyncManager settings of SyncManager 0</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="MBXIN">
					<!--SM = MbxInput ?-->
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[1]</Value1>
							<Value2>MBoxIn</Value2>
							<GotoStep>INIT_ASSIGN_TO_ECAT</GotoStep>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--SET_SM_1-->
					<Description Id="8" Level="Verbose">Set SyncManager 1 settings according to ESI</Description>
					<SetSyncManagerSettings>
						<Number>1</Number>
						<Start>DeviceDescr.SM[1].StartAddress</Start>
						<Length>DeviceDescr.SM[1].DefaultSize</Length>
						<ControlByte>DeviceDescr.SM[1].ControlByte</ControlByte>
						<Enable>DeviceDescr.SM[1].Enable</Enable>
					</SetSyncManagerSettings>
					<RaiseErrorOnFailure Id="9">Failed to set SyncManager settings of SyncManager 1</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="INIT_DONT_ASSIGN_TO_ECAT">
					<SetVariable Target="byteAssignToEcat">#x00</SetVariable>
				</TestStep>
				<TestStep Name="DONT_ASSIGN_PDI_TO_ECAT">
					<WriteEscData Source="byteAssignToEcat">
						<Address>#x500</Address>
					</WriteEscData>
				</TestStep>
				<TestStep Name="RETURN_ERROR_IF_ESC_REGISTER_FAILED">
					<RaiseErrorOnFailure Id="10">Failed to write register 0x0500 (assign EEPROM access to ECAT)!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="SET_ESM_PREOP_TIMEOUT">
					<CallTestFunction Name="GetPreOpTimeout">
						<OutParameter>t_preopTimeout</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="REQUEST_PREOP">
					<Description Id="11" Level="Output">EVENT | Request PREOP with EEPROM ACCESS not assigned to PDI</Description>
					<RequestState ErrorAck="false">
						<State>PREOP</State>
						<CheckState>
							<Timeout>t_preopTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<WarningOnSuccess Id="12" Param0="alStatus" Param1="alStatusCode">WARNING | EEPROM access was not assigned to PDI but DuT did confirm state change to PREOP. | INFO: AL Status = 0x{0:x4} , AL Status Code = 0x{1:x4}</WarningOnSuccess>
				</TestStep>
				<TestStep Name="CHECK_STATE_REQUEST_RESULT">
					<Compare>
						<NotEqual>
							<Value1>alStatus</Value1>
							<Value2>#x0011</Value2>
							<RaiseError Id="13" Param0="alStatus" Param1="alStatusCode">Invalid AL Status | Expected = 0x0011, read = 0x{0:x4} | INFO: AL Status Code = 0x{1:x4}</RaiseError>
						</NotEqual>
					</Compare>
					<Compare>
						<NotEqual>
							<Value1>alStatusCode</Value1>
							<Value2>#x0050</Value2>
							<RaiseError Id="14" Param0="alStatusCode" Param1="alStatus">Invalid AL Status Code | Expected = 0x0050, read = 0x{0:x4} | INFO: AL Status = 0x{1:x4}</RaiseError>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep Name="SUCCESS">
					<WriteLine Id="15" Param0="alStatus" Param1="alStatusCode" Level="Success">AL Status = 0x{0:x4}, AL Status Code = 0x{1:x4}</WriteLine>
				</TestStep>
			</TestCase>
		</TestGroup>
		<TestGroup Name="Test Cases from PreOp to Any" GroupId="2">
			<Comment>All test cases starting at PreOp State</Comment>
			<TestCase Name="#11.1 PreOp &gt; Init, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x01" CaseId="1">
				<?MAX_OUTPUT_ID 10?>
				<Description>
					<Purpose>Check that DuT confirms state request from ErrorPreOp to Init with AL Control = 0x01
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)
- Send start-up commands for state change PreOp to Init</PreCondition>
					<Action>IF TF-1200: State request to Init with AL Control = 0x01 (AckFlag = 0)
IF TF-1201: State request to PreOp with AL Control = 0x21 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code:
   IF TF-1200: should be 0
   IF TF-1201: AL Status Code shall be the ID Value ; Set ID Flag = 1
- Mailbox Handler is stopped
- The acknowledgement of an error without setting the AckFlag to 1 is exclusively possible for a state request to Init.</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand PI-->
					<Description Id="4" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PI</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="5">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="9" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#11.2A PreOp &gt; PreOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x02" CaseId="2">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorPreOp to PreOp with AckFlag = 0 (i.e.  AL Control = 0x02)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)</PreCondition>
					<Action>IF TF-1200: State request to Init with AL Control = 0x02 (AckFlag = 0)
IF TF-1201: State request to PreOp with AL Control = 0x22 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorPreOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrorPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#11.2B PreOp &gt; PreOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x03" CaseId="3">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorPreOp to Boot with AckFlag = 0 (i.e.  AL Control = 0x03)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)</PreCondition>
					<Action>IF TF-1200: State request to Init with AL Control = 0x03 (AckFlag = 0)
IF TF-1201: State request to PreOp with AL Control = 0x23 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorPreOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrorPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="backInitTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#11.2C PreOp &gt; PreOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x04" CaseId="4">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorPreOp to SafeOp with AckFlag = 0 (i.e.  AL Control = 0x04)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)
- Skip test if PreOp to SafeOp start-up commands required ("PS")</PreCondition>
					<Action>IF TF-1200: State request to SafeOp with AL Control = 0x4 (AckFlag = 0)
IF TF-1201: State request to SafeOp with AL Control = 0x4 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorPreOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfPreOpSafeOpStartUpCmdsRequired-->
					<CallTestFunction Name="SkipTestIfPreOpSafeOpStartUpCmdsRequired"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrorPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommands PS-->
					<Description Id="6" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PS</StateTransition>
					</SendStartupCommands>
					<WarningOnFailure Id="7">Failed to send start-up commands!</WarningOnFailure>
				</TestStep>
				<TestStep>
					<!--SetSyncManSettingsAccToPdoLength-->
					<Description Id="8" Level="Verbose">Set process data SyncManager settings according to PDO length</Description>
					<CallTestFunction Name="SetSyncManSettingsAccToPdoLength">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="9" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="10" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#11.2D PreOp &gt; PreOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x08" CaseId="5">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorPreOp to Op with AckFlag = 0 (i.e.  AL Control = 0x08)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)</PreCondition>
					<Action>IF TF-1200: State request to Op with AL Control = 0x08 (AckFlag = 0)
IF TF-1201: State request to Op with AL Control = 0x08 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorPreOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x28-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x28</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrorPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#11.2E PreOp &gt; PreOp, ErrFlag = 1, AckFlag = 0, AlCtrl = unknown" CaseId="6">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorPreOp to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (Error Flag = 1)</PreCondition>
					<Action>IF TF1200: State request to unknown state with AL Control = 0x6 (AckFlag = 0)
IF TF-1201: State request to unknown state with AL Control = 0x06 (AckFlag = 0, IdRequest = 1)</Action>
					<PostCondition>- DuT remains in ErrorPreOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #11.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = unknwon (0x06)-->
					<SetVariable Target="stateValue">#x06</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="2" Level="Verbose">Set to ErrorPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrInit!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="4" Level="Verbose">Read AL Status Code from ESC</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrInit > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#12 PreOp &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x01" CaseId="7">
				<?MAX_OUTPUT_ID 20?>
				<Description>
					<Purpose>Check that DuT confirms state request from PreOp to Init state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorInit to Init with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in PreOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Erro Flag is 1 (then AckFlag is 1 in Action)
- Send Start Up commands for state change PreOp to Init</PreCondition>
					<Action>- State request to Init with either Ack Flag 0 or 1
IF TF-1200: State request to Init with either Ack Flag 0 (AL Control = 0x01) or 1(AL Control = 0x11) 
IF Tf-1201: State request to Init with either Ack Flag 0 ((AL Control = 0x21) or 1 (AL Control = 0x31) , IdRequest = 1</Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #12"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="2" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand PI-->
					<Description Id="4" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PI</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="5">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--PreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="9" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="11">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="12" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="13">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand PI-->
					<Description Id="14" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PI</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="15">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrPreOp > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="16" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="17" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="18" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="19" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="20" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#13 PreOp &gt; PreOp, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x02" CaseId="8">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT confirms state request from PreOp to PreOp state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorPreOp to PreOp with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in PreOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Errof Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200: State request to PreOp with either Ack Flag 0 or 1
IF Tf-1201: State request to PreOp with either Ack Flag 0 or 1, IdRequest = 1</Action>
					<PostCondition>- DuT goes to PreOp
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #13"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x02-->
					<SetVariable Target="stateValueNext">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22
- stateValueNext = 0x22
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="2" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--PreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="9" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrPreOp!!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--PreOp > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#17  PreOp &gt; PreOp, ErrFlag = 0 or ErrAck = 1, AlCtrl = 0x04, SmSett_2_To_n not match" CaseId="9">
				<?MAX_OUTPUT_ID 39?>
				<Description>
					<Purpose>Check that DuT reject state request with invalid process data SyncManager settings from PreOp to SafeOp state with AckFlag = 0 (i.e.  AL Control = 0x04) and from ErrorPreOp to SafeOp with AckFlag = 1 (i.e. AL Control = 0x14)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in PreOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Erro Flag is 1 (then AckFlag is 1 in Action)
- For each available process data SyncManager: Settings for this SyncManager do not match while all others match. The wrong SyncManager settings are generated according to this logic: 
	- if SM is enabled --&gt; disable
	- if SM is disabled --&gt; Write start address and length of other enabled SM
- Send PreOp-SafeOp ("PS") start-up commands if ErrFlag = 0</PreCondition>
					<Action>IF TF-1200: State request to SafeOp with either Ack Flag 0 (AL Control = 0x04) or 1 (AL Control = 0x14) 
IF TF-1201: State request to SafeOp with either Ack Flag 0 (AL Control = 0x24) or 1 (AL Control = 0x34) and ID Request = 1</Action>
					<PostCondition>- DuT goes to Error PreOp, i.e. AL Status = 0x12
- ID Flag remains 0
- Set AL Status Code: 
	When Output SyncManager Settings do not match: 0x1D
	When Input SyncManager Settings do not match: 0x1E
	AL Status Code 0x17 should not be use since it is inaccurate	</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #17"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--InitPdSmIndex-->
					<SetVariable Target="index">0</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<CallTestFunction Name="GetListOfAllPdSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
					<WriteLine Id="39" Param0="allPdSm" Level="Verbose">allPdSm = {0}</WriteLine>
				</TestStep>
				<TestStep Name="ReturnIfNoPdSmSupported">
					<SizeOf UInt32Var="pdSmCount">allPdSm</SizeOf>
					<Compare>
						<Equal>
							<Value1>pdSmCount</Value1>
							<Value2>0</Value2>
							<Return Id="2">No Process Data SyncManagers supported by this device | Test skipped!</Return>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="InitSmNoWithFirstPdSm">
					<GetArrayItem Index="index" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep Name="InitLastPdSmOfList">
					<GetArrayItem Index="pdSmCount-1" SourceArray="allPdSm" Target="lastPdSm"></GetArrayItem>
					<Compare>
						<Equal>
							<Value1>Settings.bAll_debugMsg</Value1>
							<Value2>true</Value2>
							<WriteLine Id="3" Param0="lastPdSm" Level="Verbose">  highest process data SyncManager = {0}</WriteLine>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--expectedAlStatusCode2 = 0x17-->
					<SetVariable Target="expectedAlStatusCode2">#x17</SetVariable>
				</TestStep>
				<TestStep>
					<!--Get smControlType-->
					<GetBits Source="DeviceDescr.SM[smNo].ControlByte" Target="smControlType">
						<Offset>2</Offset>
						<Length>2</Length>
					</GetBits>
					<WriteLine Id="4" Param1="smNo" Param0="smControlType" Level="Verbose">Next tested: SyncManager{0}, Type (ESI element Sm:ControlByte) = {1} | Info: 0 =  Input , 1 = Output</WriteLine>
					<Compare>
						<Equal>
							<Value1>smControlType</Value1>
							<Value2>0</Value2>
							<GotoStep>INPUTALCODE</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="OUTPUTALCODE">
					<!--expectedAlStatusCode = 0x1D (Outputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1D</SetVariable>
					<WriteLine Id="5" Param0="expectedAlStatusCode" Level="Verbose">Expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<GotoStep>START</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="INPUTALCODE">
					<!--expectedAlStatusCode = 0x1E (Inputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1E</SetVariable>
					<WriteLine Id="6" Param0="expectedAlStatusCode" Level="Verbose">Expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
				</TestStep>
				<TestStep Name="START">
					<!--ACK = 0-->
					<SetVariable Target="errAck">FALSE</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="7" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="8">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommands PS-->
					<Description Id="9" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PS</StateTransition>
					</SendStartupCommands>
					<WarningOnFailure Id="10">Failed to send start-up commands!</WarningOnFailure>
				</TestStep>
				<TestStep>
					<!--SetSyncManSettingsAccToPdoLength-->
					<Description Id="13" Level="Verbose">Set process data SyncManager settings according to PDO length</Description>
					<CallTestFunction Name="SetSyncManSettingsAccToPdoLength">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="16" Level="Verbose" Param0="smNo">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--PreOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="17" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="18" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="19" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>expectedAlStatusCode2<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="20" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--CheckIfPreOpSafeOpStartUpCmdsRequired-->
					<CallTestFunction Name="CheckIfPreOpSafeOpStartUpCmdsRequired">
						<OutParameter>bSkipPartOfTest</OutParameter>
					</CallTestFunction>
					<Compare>
						<Equal>
							<Value1>bSkipPartOfTest</Value1>
							<Value2>True</Value2>
							<WriteLine Id="21" Level="Output">PreOp-SafeOp start-up commands required. Skip ErrPreOp to SafeOp part of this test case.</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bSkipPartOfTest</Value1>
							<Value2>True</Value2>
							<GotoStep>NEXT</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode2 = 0x17-->
					<SetVariable Target="expectedAlStatusCode2">#x17</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="22">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="23" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="24">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommands PS-->
					<Description Id="25" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>PS</StateTransition>
					</SendStartupCommands>
					<WarningOnFailure Id="26">Failed to send start-up commands!</WarningOnFailure>
				</TestStep>
				<TestStep>
					<!--SetSyncManSettingsAccToPdoLength-->
					<Description Id="29" Level="Verbose">Send device specific start up commands</Description>
					<CallTestFunction Name="SetSyncManSettingsAccToPdoLength">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="32" Level="Verbose" Param0="smNo">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--PreOp > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="33" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="34" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="35" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>expectedAlStatusCode2<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="36" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep Name="NEXT">
					<!--All Sms tested ?-->
					<SetVariable Target="index">index+1</SetVariable>
					<Compare>
						<Greater>
							<Value1>index</Value1>
							<Value2>uint32_sizeOfAllPdSm</Value2>
							<Return Id="37"></Return>
						</Greater>
					</Compare>
				</TestStep>
				<TestStep Name="GetNextPdSm">
					<GetArrayItem Index="index" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep>
					<!--Reset device -->
					<Description Id="38">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="# 18 PreOp &gt; PreOp,  ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x03 or 0x08" CaseId="10">
				<?MAX_OUTPUT_ID 28?>
				<Description>
					<Purpose>Check that DuT rejects state request from PreOp to Boot or Op state with AckFlag = 0 (i.e.  AL Control = 0x03 or 0x08) and from ErrorPreOp to Boot or Op with AckFlag = 1 (i.e. AL Control = 0x13 or 0x18)
IF- Tf-1201: IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in PreOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200 (ID Request = 0)
a) State request to Bootstrap with either AckFlag 0 (AL Control = 0x03)  or 1 (AL Control = 0x13)
b) State request to Op with either AckFlag 0 (AL Control = 0x08) or 1 (AL Control = 0x18)

IF TF-1201 (ID Request = 1):
a) State request to Bootstrap with either AckFlag 0 (AL Control = 0x23) or 1(AL Control = 0x33) 
b) State request to Op with either AckFlag 0 (AL Control = 0x28) or 1 (AL Control = 0x38)</Action>
					<PostCondition>- DuT goes to Error PreOp, i.e. Error Flag = 1
- ID Flag remains 0
- Set AL Status Code to 0x11</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #18"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x11-->
					<SetVariable Target="expectedAlStatusCode">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="2" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="4" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} |AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="9" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} |AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x28-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x28</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="15">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="16" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="17">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="18" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="19" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="20" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="21" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} |AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="22">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="23" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="24">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="25" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="26" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="27" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="28" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} |AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="# 19 PreOp &gt; PreOp,  ErrFlag = 0 or AckFlag = 1, AlCtrl = unknown" CaseId="11">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT rejects state request PreOp to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06) and from ErrorPreOp to unknown with AckFlag = 1 (i.e. AL Control = 0x16)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in PreOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Error Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200: State request to unknown state with either AckFlag 0 (AL Control = 0x06) or 1 (AL Control = 0x16)
IF TF-1201: State request to unknown state with either AckFlag 0 (AL Control = 0x26) or 1 (AL Control = 0x36), ID Request = 1</Action>
					<PostCondition>- DuT goes to Error PreOp, i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x12</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #19"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = Unknown (0x06)-->
					<SetVariable Target="stateValue">6</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x12-->
					<SetVariable Target="expectedAlStatusCode">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<Description Id="2" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--alStatus.Code ?-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACk = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrPreOp-->
					<Description Id="9" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--alStatus.Code ?-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="# 20.1  PreOp &gt; PreOp, Sm_Chg, ErrFlag = 0, SmSett01 match" CaseId="12">
				<?MAX_OUTPUT_ID 1?>
				<Description>
					<Purpose>No test logic executed. Test case documents ESM transition for completeness.</Purpose>
					<PreCondition>- DuT uses SyncManger Change event (0x0204.04 = TRUE)
- DuT is set to PreOp 
- ErrorFlag = 0</PreCondition>
					<Action>SM Change event is issued (this can only be done by changing the SyncManager Activation Register (+0x06.1). So this is not possible. Hence, the test is only theoretical</Action>
					<PostCondition>- AL Event shall be acknowledged</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #20.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Info-->
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<SkipCase Id="1">INFO | Test Case only theoretical and cannot be tested in real environment.</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="# 20.2  PreOp &gt; PreOp, Sm_Chg, ErrFlag = 1 " CaseId="13">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that SyncManager change event is ignored when slave is already in PreOpError.
Skipped in TF-1201</Purpose>
					<PreCondition>- DuT in PreOp Error (ErrFlag = 1)
- Settings for all available SyncManagers match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager settings for one SyncManager at a time</Action>
					<PostCondition>SyncManager Change Event shall be ignored, i.e. DuT shall remain in ErrPreOp with unchanged AL Status Code</PostCondition>
					<ProposalForSolution>Do not change the AL Status (0x130) and AL Status Code (0x134) due to the SyncManager change event</ProposalForSolution>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #20.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--> ErrPreOp-->
					<Description Id="3" Level="Verbose">Set to ErrPreOp (AL Status = 0x12)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>ERROR_PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrPreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--stateValueNext ?-->
					<ReadEscData Target="stateValueNext">
						<Address>#x130</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0130!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="6" Level="Verbose">Read AL Status Code from ESC (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="7">Failed to read register 0x0134</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="8" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="9" Param0="backInitTimeout" Level="Output">EVENT: SM_Chg | Wait for {0}ms until expected behaviour is checked.</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="10" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part Successful-->
					<WriteLine Id="11" Param0="smNo" Level="Success">SUCCESSFUL for Sm{0}</WriteLine>
				</TestStep>
				<TestStep Name="NEXTSM">
					<SetVariable Target="smNo">smNo+1</SetVariable>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<Return Id="12"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep Name="SkipIfVirtual">
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>null</Value2>
							<GotoStep>RESET</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<WriteLine Id="13" Level="Verbose" Param0="smNo">Skip test for Sm{0} since Flag "Sm@Virtual = True" in ESI</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<GotoStep>NEXTSM</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="RESET">
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="# 21 PreOp &gt; Init, Sm_Chg, ErrFlag = 0, SmSett0 or SmSett1 not match" CaseId="14">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>Check if slave goes from PreOp to ErrorInit if mailbox SyncManagers are set to invalid settings.
Skipped in TF-1201</Purpose>
					<PreCondition>- DuT is set to PreOp (AL Status = 0x02)
- Mailbox SyncManager settings match
- DuT supports Mailbox SyncManagers (ESI element Sm = MBoxOut)</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager0 or SyncManger1 settings</Action>
					<PostCondition>- AL Status Code = 0x16
- AL Status = 0x11
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #21"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfComplexDevButNoMbxSyncManagers-->
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="3">SKIP | No MailboxOut SyncManager configured in ESI file, i .e. device does not support mailboxes</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--No MBox-SyncManager in ESI -> Skip Test-->
					<Description Id="4" Level="Verbose">Check if device supports Mailbox SyncManager according to ESI file and skip test if not</Description>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM.Count</Value1>
							<Value2>0</Value2>
							<SkipCase Id="5">Device does not have any SyncManager according to ESI file.</SkipCase>
						</Equal>
					</Compare>
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="6">Device does not have an  Output Mailbox SyncManager on SM0, i.e. device does not support Mailbox SyncManagers according to its ESI file.</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<SetVariable Target="expectedAlStatusCode">#x16</SetVariable>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--> PreOp-->
					<Description Id="7" Level="Verbose">Set to PreOp (AL Status = 0x02)</Description>
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="8">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="9" Param0="smNo" Level="Verbose">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="10" Param0="backInitTimeout" Level="Output">EVENT: SM_Chg | Wait for {0}ms until expected behaviour is checked!</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="12" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part successful-->
					<WriteLine Id="13" Param0="smNo" Level="Success">SUCCESSFUL for Sm{0}</WriteLine>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<SetVariable Target="smNo">smNo+1</SetVariable>
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<Return Id="14"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device-->
					<Description Id="15">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
		</TestGroup>
		<TestGroup Name="Test Cases from SafeOp to Any" GroupId="3">
			<Comment>All test cases starting at SafeOp State</Comment>
			<TestCase Name="#22.1 SafeOp &gt; Init, ErrFlag  = 1, AckFlag = 0, AlCtrl = 0x01" CaseId="1">
				<?MAX_OUTPUT_ID 11?>
				<Description>
					<Purpose>Check that DuT confirms state request from ErrorSafeOp to Init with AL Control = 0x01
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in ErrorSafeOp (AL Status = 0x14)
- Send start-up commands for state change PreOp to Init</PreCondition>
					<Action>IF TF-1200: State request to Init state with AckFlag 0 (AL Control = 0x01)
IF TF-1201: State request to Init state with AckFlag 0 and ID Request = 1 (AL Control = 0x21) </Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code:
   IF TF-1200: should be 0
   IF TF-1201: AL Status Code shall be the ID Value ; Set ID Flag = 1
- The acknowledgement of an error without setting the AckFlag to 1 is exclusively possible for a state request to Init.
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)
- Input and Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)
- Local Outputs are in safe state (e.g. not driven high any more)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="ReturnIfNoPdSmSupported">
					<SizeOf UInt32Var="pdSmCount">allPdSm</SizeOf>
					<Compare>
						<Equal>
							<Value1>pdSmCount</Value1>
							<Value2>0</Value2>
							<Return Id="4">No Process Data SyncManagers supported by this device | Test skipped!</Return>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="InitSmNoWithFirstPdSm">
					<GetArrayItem Index="0" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep Name="InitLastPdSmOfList">
					<GetArrayItem Index="pdSmCount-1" SourceArray="allPdSm" Target="lastPdSm"></GetArrayItem>
					<Compare>
						<Equal>
							<Value1>Settings.bAll_debugMsg</Value1>
							<Value2>true</Value2>
							<WriteLine Id="5" Param0="lastPdSm" Level="Verbose">  highest process data SyncManager = {0}</WriteLine>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="9" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped">
					<Description Id="10" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="END">
					<!--Successful-->
					<WriteLine Id="11" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#22.2A SafeOp &gt; SafeOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x02" CaseId="2">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorSafeOp to PreOp with AckFlag = 0 (i.e.  AL Control = 0x02)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorSafeOp (AL Status = 0x14)
- Send start-up commands for state change SafeOp to PreOp</PreCondition>
					<Action>IF TF-1200: State request to PreOp state with AckFlag 0 (AL Control = 0x02)
IF TF-1201: State request to PreOp state with AckFlag 0 and ID Request = 1 (AL Control = 0x22) </Action>
					<PostCondition>- DuT remains in ErrorSafeOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from 0x0134</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
					<WriteLine Id="6" Param0="expectedAlStatusCode" Level="Verbose">Read AL Status Code (0x0134) = 0x{0:x4}</WriteLine>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand SP-->
					<Description Id="7" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>SP</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="8">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!-- ErrSafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<WarningOnSuccess Id="9" Param0="stateValueNext" Param1="alStatus" Param2="expectedAlStatusCode" Param3="alStatusCode">Device should not confirm a state request from ErrSafeOp to PreOp without ErrAck = TRUE. | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: Expected AL Status Code = 0x{2:x4} | Read = 0x{3:x4}</WarningOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="10" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<Compare>
						<Equal>
							<Value1>alStatus</Value1>
							<Value2>#x02</Value2>
							<GotoStep>SUCCESS</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="11" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SUCCESS">
					<!--Successful-->
					<WriteLine Id="12" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#22.2B SafeOp &gt; SafeOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x03" CaseId="3">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorSafeOp to Boot with AckFlag = 0 (i.e.  AL Control = 0x03)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorSafeOp (AL Status = 0x14)</PreCondition>
					<Action>IF TF-1200: State request to Boot state with AckFlag 0 (AL Control = 0x03)
IF TF-1201: State request to Boot  state with AckFlag 0 and ID Request = 1 (AL Control = 0x23) </Action>
					<PostCondition>- DuT remains in ErrorSafeOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">#x03</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from 0x0134</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!-- ErrSafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#22.2C SafeOp &gt; SafeOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x04" CaseId="4">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorSafeOp to SafeOp with AckFlag = 0 (i.e.  AL Control = 0x04)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorSafeOp (AL Status = 0x14)</PreCondition>
					<Action>IF TF-1200: State request to SafeOp state with AckFlag 0 (AL Control = 0x04)
IF TF-1201: State request to SafeOp state with AckFlag 0 and ID Request = 1 (AL Control = 0x24) </Action>
					<PostCondition>- DuT remains in ErrorSafeOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from 0x0134</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!-- ErrSafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#22.2D SafeOp &gt; SafeOp, ErrFlag = 1, AckFlag = 0, AlCtrl = 0x08" CaseId="5">
				<?MAX_OUTPUT_ID 11?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorSafeOp to Op with AckFlag = 0 (i.e.  AL Control = 0x08)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorPreOp (AL Status = 0x14)
- Send start-up commands for state change SafeOp to Op</PreCondition>
					<Action>IF TF-1200: State request to Op state with AckFlag 0 (AL Control = 0x08)
IF TF-1201: State request to Op state with AckFlag 0 and ID Request = 1 (AL Control = 0x28) </Action>
					<PostCondition>- DuT remains in Error SafeOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x28-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x28</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from 0x0134</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand SO-->
					<Description Id="6" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>SO</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="7">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!-- ErrSafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="8" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="9" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="10" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="11" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#22.2E SafeOp &gt; SafeOp, ErrFlag = 1, AckFlag = 0, AlCtrl = unknown" CaseId="6">
				<?MAX_OUTPUT_ID 9?>
				<Description>
					<Purpose>Check that DuT rejects state request from ErrorSafeOp to unknown with AckFlag = 0 (i.e.  AL Control = 0x06)
IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in ErrorSafeOp (AL Status = 0x14)</PreCondition>
					<Action>IF TF-1200: State request to unknown state with AckFlag 0 (AL Control = 0x06)
IF TF-1201: State request to unknown state with AckFlag 0 and ID Request = 1 (AL Control = 0x26) </Action>
					<PostCondition>- DuT remains in ErrorSafeOp
- ErrFlag remains 1 (no acknowlegement of error)
- ID Flag remains 0
- AL Status Code remains unchanged (same es before action)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #22.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = unknown (0x26)-->
					<SetVariable Target="stateValue">#x06</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode-->
					<Description Id="4" Level="Verbose">Read AL Status Code from 0x0134</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0134!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!-- ErrSafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="alStatusCode" Param2="expectedAlStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2} || Info: AL Status Code before event = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#23 SafeOp &gt; Init, ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x01" CaseId="7">
				<?MAX_OUTPUT_ID 18?>
				<Description>
					<Purpose>Check that DuT confirms state request from SafeOp to Init state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorSafeOp to Init with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in SafeOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Errof Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>- State request to Init with either Ack Flag 0 or 1
IF TF-1200: State request to Init with either Ack Flag 0 (AL Control = 0x01) or 1(AL Control = 0x11) 
IF Tf-1201: State request to Init with either Ack Flag 0 ((AL Control = 0x21) or 1 (AL Control = 0x31) , IdRequest = 1</Action>
					<PostCondition>- DuT goes to Init
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)
- Input and Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #23"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x01-->
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x01-->
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> SafeOp-->
					<Description Id="2" Level="Verbose">Set to SafeOp (AL Status = 0x04)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSmAckFalse">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="6" Level="Verbose">Read AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="7" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStoppedAckFalse">
					<Description Id="8" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SUCCESS0">
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="10">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> SafeOp-->
					<Description Id="11" Level="Verbose">Set to SafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="12">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSmAckTrue">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="13" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="14" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="15" Level="Verbose">Read AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="16" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStoppedAckTrue">
					<Description Id="17" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SUCCESS1">
					<!--Successful-->
					<WriteLine Id="18" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#24 SafeOp &gt; PreOp, ErrFlag = 0 or ErrAck = 1,  AlCtrl = 0x02" CaseId="8">
				<?MAX_OUTPUT_ID 20?>
				<Description>
					<Purpose>Check that DuT confirms state request from SafeOp to PreOp state with AckFlag = 0 (i.e.  AL Control = 0x01) and from ErrorSafeOp to PreOp with AckFlag = 1 (i.e. AL Control = 0x11)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in SafeOp
- Either Error Flag is 0 (then AckFlag is 0 in Action) or Erro Flag is 1 (then AckFlag is 1 in Action)
- Send start-up commands for state change SafeOp to PreOp</PreCondition>
					<Action>IF TF-1200: State request to PreOp with either Ack Flag 0 or 1
IF Tf-1201: State request to PreOp with either Ack Flag 0 or 1, IdRequest = 1</Action>
					<PostCondition>- DuT goes to PreOp
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Input and Output Handler are stopped (Deactivate SyncManager Bit in +0x07.0)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #24"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x02-->
					<SetVariable Target="stateValueNext">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22
- stateValueNext = 0x22
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to SafeOp (AL Status = 0x04)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand SP-->
					<Description Id="4" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>SP</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="5">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="6" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="7" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="8" Level="Verbose">Check AL Status Code</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_AckFalse">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_AckFalse">
					<Description Id="9" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SUCCESS">
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="11">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="12" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="13">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand SP-->
					<Description Id="14" Level="Verbose">Send device specific start up commands</Description>
					<SendStartupCommands>
						<StateTransition>SP</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="15">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="16" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="17" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="18" Level="Verbose">Check AL Status Code</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_AckTrue">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_AckTrue">
					<Description Id="19" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="20" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#25.1 SafeOp &gt; SafeOp, ErrFlag = 1, localErrFlag = 0, AckFlag = 1, AlCtrl = 0x04" CaseId="9">
				<?MAX_OUTPUT_ID 8?>
				<Description>
					<Purpose>Check that DuT confirms state request from ErrorSafeOp to SafeOp with AckFlag = 1 (i.e. AL Control = 0x14)
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Error SafeOp (AL Status = 0x14)
- no local error on DuT</PreCondition>
					<Action>IF TF-1200: State request to SafeOp with Ack Flag 1 (AL Control = 0x14)
IF TF-1201: State request to SafeOp with Ack Flag 1 (AL Control = 0x34) and ID Request = 1</Action>
					<PostCondition>- DuT goes to SafeOp
- Acknowledge error by setting Error Flag = 0
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- EnableSmChannel (all SyncManager shall be enabled)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #25.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x04-->
					<SetVariable Target="stateValueNext">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24
- stateValueNext = 0x24
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x24</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp-->
					<Description Id="2" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status Code</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifyInOutputHandlerStarted-->
					<Description Id="7" Level="Verbose">Checks if all process data SyncManagers are activated from PDI side (Bit +0x07.0 of the SyncManager register shall be 0).

Before checking the PDI SM Activation bit the test checks if the process data SyncManager has to be enabled at all (i.e. PDO length unequal zero).
If +6.0 = True than +7.0 shall be true</Description>
					<CallTestFunction Name="VerifyInOutputHandlerStarted">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="8" Param0="alStatus" Param1="alStatusCode" Level="Success">SUCCESSFUL: || AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#25.2 SafeOp &gt; SafeOp, ErrFlag = 0 or (localErrorFlag = true,  AckFlag = 1), AlCtrl = 0x04" CaseId="10">
				<?MAX_OUTPUT_ID 1?>
				<Description>
					<Purpose>Test documented only for completeness. No test logic performed.</Purpose>
					<PreCondition>- DuT in SafeOp
a) ErrFlag = 0 (AL Status = 0x04)
b) no local error and ErrorFlag = 1 (AL Status = 0x14)</PreCondition>
					<Action>- State request to SafeOp
a) AL Control = 0x04 (ErrAck = false)
b) AL Control = 0x14 (ErrAck = true)</Action>
					<PostCondition>- DuT goes to SafeOp (0x04)
- Acknowledge error by setting Error Flag = 0
- AL Status Code should be 0</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #25.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<SkipCase Id="1">INFO | Test Case only theoretical and cannot be tested in real environment.</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#29 SafeOp &gt; SafeOp, AL ErrFlag = 0 or AckFlag = 1, AlCtrl = 0x03" CaseId="11">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT rejects state request from SafeOP to Boot state with AckFlag = 0 (i.e.  AL Control = 0x03) and from ErrorSafeOp to Boot with AckFlag = 1 (i.e. AL Control = 0x13)
IF- Tf-1201: IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in SafeOp
Either Error Flag is 0 (then AckFlag is 0 in Action) or Errof Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action> TF-1200: State request to Boot with Ack Flag = 0 (AL Control = 0x03) or Ack Flag = 1 (AL Control = 0x13)
 TF-1201: State request to Boot with Ack Flag = 0 (AL Control = 0x23) or Ack Flag = 1 (AL Control = 0x33) and ID Flag = 1</Action>
					<PostCondition>- DuT goes to Error PreOp (0x12), i.e. Error Flag = 1
- Set AL Status Code to 0x11
- ID Flag remains 0</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #29"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x03-->
					<SetVariable Target="stateValue">3</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x11-->
					<SetVariable Target="expectedAlStatusCode">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--errAck = False-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> SafeOp -->
					<Description Id="2" Level="Verbose">Set to SafeOp (AL Status = 0x04)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusAndAlStatusCode">
						<Parameter>alStatus</Parameter>
						<Parameter>alStatusCode</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--errAck = True-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp -->
					<Description Id="9" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SafeOp > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusAndAlStatusCode">
						<Parameter>alStatus</Parameter>
						<Parameter>alStatusCode</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#30 SafeOp &gt; SafeOp, ErrFlag = 0 or AckFlag = 1, AlCtrl = unknown" CaseId="12">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check that DuT rejects state request SafeOp to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06) and from ErrorSafeOp to unknown with AckFlag = 1 (i.e. AL Control = 0x16)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in SafeOp
Either Error Flag is 0 (then AckFlag is 0 in Action) or Errof Flag is 1 (then AckFlag is 1 in Action)</PreCondition>
					<Action>IF TF-1200: State request to unknown state with either AckFlag 0 (AL Control = 0x06) or 1 (AL Control = 0x16)
IF TF-1201: State request to unknown state with either AckFlag 0 (AL Control = 0x26) or 1 (AL Control = 0x36), ID Request = 1</Action>
					<PostCondition>- DuT goes to Error SafeOp (0x12), i.e. Error Flag = 1
- ID Flag = 0
- Set AL Status Code to 0x12</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #30"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="1" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x06-->
					<SetVariable Target="stateValue">6</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x12-->
					<SetVariable Target="expectedAlStatusCode">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x216-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--errAck = False-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> SafeOp -->
					<Description Id="2" Level="Verbose">Set to SafeOp (AL Status = 0x04)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SafeOp > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="4" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="5" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="6" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusAndAlStatusCode">
						<Parameter>alStatus</Parameter>
						<Parameter>alStatusCode</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="7" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--errAck = True-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--> ErrSafeOp -->
					<Description Id="9" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--ErrSafeOp > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="11" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="12" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusAndAlStatusCode-->
					<Description Id="13" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusAndAlStatusCode">
						<Parameter>alStatus</Parameter>
						<Parameter>alStatusCode</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="14" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#31.1 SafeOp &gt; SafeOp, Sm_Chg, ErrFlag = 0, SmSett0123 match" CaseId="13">
				<?MAX_OUTPUT_ID 1?>
				<Description>
					<Purpose>Test documented only for completeness. No test logic performed.</Purpose>
					<PreCondition>- DuT uses SyncManger Change event (0x0204.04 = TRUE)
- DuT is set to SafeOp
- ErrorFlag = 0</PreCondition>
					<Action>SM Change event is issued (this can only be done by changing the SyncManager Activation Register (+0x06.1). So this is not possible. Hence, the test is only theoretical</Action>
					<PostCondition>- AL Event (= SyncManager Change Event) is acknowledged</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #31.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Info-->
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<SkipCase Id="1">INFO | Test Case only theoretical and cannot be tested in real environment.</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#31.2 SafeOp &gt; SafeOp, ErrFlag = 1, Sm_Chg" CaseId="14">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check if DuT ignores SyncManager change event in ErrorSafeOp
If TF-1201: Test is skipped.</Purpose>
					<PreCondition>- DuT in SafeOp Error (ErrFlag = 1)
- Settings for all available SyncManagers match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager settings for one SyncManager at a time</Action>
					<PostCondition>SyncManager Change Event shall be ignored, i.e. 
DuT shall remain in ErrSafeOp with unchanged AL Status Code</PostCondition>
					<ProposalForSolution>Do not change the AL Status (0x130) and AL Status Code (0x134) due to the SyncManager change event</ProposalForSolution>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #31.2"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--> ErrSafeOp-->
					<Description Id="3" Level="Verbose">Set to ErrSafeOp (AL Status = 0x14)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>ERROR_SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to ErrSafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--stateValueNext ?-->
					<ReadEscData Target="stateValueNext">
						<Address>#x130</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="5">Failed to read register 0x0130!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode ?-->
					<Description Id="6" Level="Verbose">Read AL Status Code (0x0134)</Description>
					<ReadEscData Target="expectedAlStatusCode">
						<Address>#x134</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="7">Failed to read register 0x0134</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="8" Level="Verbose" Param0="smNo">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backSafeOPTimeout">
					<!--Event-->
					<WriteLine Id="9" Param0="backInitTimeout" Level="Output">EVENT: SM_Chg | Wait for {0}ms until expected behaviour is checked.</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="10" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Part Successful-->
					<WriteLine Id="11" Param0="smNo" Level="Success">Test successful for Sm{0}</WriteLine>
				</TestStep>
				<TestStep Name="NEXTSM">
					<SetVariable Target="smNo">smNo+1</SetVariable>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<Return Id="12"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep Name="SkipIfVirtual">
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>null</Value2>
							<GotoStep>RESET</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<WriteLine Id="13" Level="Verbose" Param0="smNo">Skip test for Sm{0} since Flag "Sm@Virtual = True" in ESI</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>DeviceDescr.SM[smNo].Virtual</Value1>
							<Value2>true</Value2>
							<GotoStep>NEXTSM</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="RESET">
					<!--Reset device-->
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>DeviceDescr.SM.Count</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#32 SafeOp &gt; PreOp Sm_Chg, ErrFlag = 0, SmSett01 match, SmSett 23 not match" CaseId="15">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>Check if DuT goes to ErrorPreOp if process data SyncManagers are set to invalid settings.
If TF-1201: Test is skipped.</Purpose>
					<PreCondition>- DuT in SafeOp (AL Status = 0x04)
- Settings for all available SyncManagers match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager settings for one process data SyncManager at a time</Action>
					<PostCondition>- DuT goes to Error PreOp, i.e. AL Status = 0x12
- Set AL Status Code: 
	When Output SyncManager Settings do not match: 0x1D
	When Input SyncManager Settings do not match: 0x1E
	AL Status Code 0x17 should not be use since it is inaccurate
- Input and Output Handler are stopped (Deactivate SyncManager Bit in +0x07.0)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #32"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep Name="InitPdIndex">
					<SetVariable Target="index32">0</SetVariable>
				</TestStep>
				<TestStep Name="InitAlStatusCodeArray">
					<InitArray TargetArray="alStatus.Code" Length="3"></InitArray>
				</TestStep>
				<TestStep Name="GetListOfAllPdSm">
					<CallTestFunction Name="GetListOfAllPdSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> PreOp -->
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="3">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--GetListOfAllEnabledSm-->
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SkipTestIfNoPdSm">
					<SizeOf UInt32Var="pdSmCount">allPdSm</SizeOf>
					<Compare>
						<Equal>
							<Value1>pdSmCount</Value1>
							<Value2>0</Value2>
							<Return Id="4">No enabled Process Data SyncManagers supported by this device | Test skipped!</Return>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--Init smNo with first PdSm-->
					<GetArrayItem Index="index32" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode2 = 0x17-->
					<SetVariable Target="expectedAlStatusCode2">#x17</SetVariable>
				</TestStep>
				<TestStep>
					<!--Get smControlType-->
					<GetBits Source="DeviceDescr.SM[smNo].ControlByte" Target="smControlType">
						<Offset>2</Offset>
						<Length>2</Length>
					</GetBits>
					<WriteLine Id="5" Param0="smControlType" Level="Verbose">Type of next tested SyncManager = {0} | Info: 0 =  Input , 1 = Output</WriteLine>
					<Compare>
						<Equal>
							<Value1>smControlType</Value1>
							<Value2>0</Value2>
							<GotoStep>INPUTALCODE</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="OUTPUTALCODE">
					<!--expectedAlStatusCode = 0x1D (Outputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1D</SetVariable>
					<WriteLine Id="6" Param0="expectedAlStatusCode" Level="Verbose">expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<GotoStep>START</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="INPUTALCODE">
					<!--expectedAlStatusCode = 0x1E (Inputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1E</SetVariable>
					<WriteLine Id="7" Param0="expectedAlStatusCode" Level="Verbose">expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
				</TestStep>
				<TestStep Name="START">
					<!--Reset device (if offline test will skipped)-->
					<Description Id="8">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> SafeOp -->
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="9">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--GetListOfAllEnabledSm-->
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="10" Level="Verbose" Param0="smNo">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="11" Param0="backInitTimeout" Level="Output">Event: SM_Chg | Wait for {0}ms before expected behaviour is checked!</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="12" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>expectedAlStatusCode2<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped">
					<Description Id="13" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="ReadAlStatusAndStatusCodeFromEsc">
					<ReadEscData Target="alStatus.Code">
						<Address>#x130</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="14">Failed to read register 0x0135:0x0130</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="ExtractAlStatus">
					<GetArrayItem SourceArray="alStatus.Code" Index="0" Target="alStatus"></GetArrayItem>
				</TestStep>
				<TestStep Name="ExtractAlStatusCode">
					<GetArrayItem SourceArray="alStatus.Code" Index="2" Target="alStatusCode"></GetArrayItem>
				</TestStep>
				<TestStep Name="END">
					<WriteLine Id="15" Param0="alStatus" Param1="alStatusCode" Param2="smNo" Level="Success">Test successful for Sm{2}: | AL Status = 0x{0:x2} | AL Status Code = 0x{1:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<SetVariable Target="index32">index32+1</SetVariable>
					<Compare>
						<Lower>
							<Value1>index32</Value1>
							<Value2>pdSmCount</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#33 SafeOp &gt; Init, ErrFlag = 0, SmSett0 or SmSett1 not match" CaseId="16">
				<?MAX_OUTPUT_ID 14?>
				<Description>
					<Purpose>Check if DuT goes to ErrorPreOp if mailbox SyncManagers are set to invalid settings.
If TF-1201: Test is skipped.</Purpose>
					<PreCondition>- DuT is set to SafeOp (AL Status = 0x04)
- all SyncManager settings match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager0 or SyncManager1 settings</Action>
					<PostCondition>- AL Status Code = 0x16
- AL Status = 0x11
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)
- Input and Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #33"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfComplexDevButNoMbxSyncManagers-->
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="3">SKIP | No MailboxOut SyncManager configured in ESI file, i .e. device does not support mailboxes</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x11-->
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x16-->
					<SetVariable Target="expectedAlStatusCode">#x16</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode2 = 0x1D-->
					<SetVariable Target="expectedAlStatusCode2">#x1D</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode3 = 0x1E-->
					<SetVariable Target="expectedAlStatusCode3">#x1E</SetVariable>
				</TestStep>
				<TestStep>
					<!--> PreOp-->
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_InPreOP">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Init smNo-->
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device-->
					<Description Id="5">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--> SafeOp-->
					<RunToState Timeout="safeOPTimeout">
						<State>SAFEOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="6">Failed to run to SafeOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_InSafeOP">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="7" Level="Verbose" Param0="smNo">Set invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="8" Param0="backInitTimeout" Level="Output">Event: SM_Chg | Wait for {0}ms before expected behaviour is checked!</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>expectedAlStatusCode2<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>expectedAlStatusCode3<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfMbxHandlerStopped-->
					<Description Id="10" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped">
					<Description Id="11" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="END">
					<!--Part successful-->
					<WriteLine Id="12" Param0="smNo" Level="Success">SUCCESSFUL for Sm{0}</WriteLine>
				</TestStep>
				<TestStep>
					<!--All Sms tested ?-->
					<SetVariable Target="smNo">smNo+1</SetVariable>
					<Compare>
						<GreaterOrEqual>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<Return Id="13"></Return>
						</GreaterOrEqual>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device-->
					<Description Id="14">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
		</TestGroup>
		<TestGroup Name="Test Cases from Op to Any" GroupId="4">
			<Comment>All test cases starting at Op State</Comment>
			<TestCase Name="#37 Op &gt; Init, Ack = 0 or 1, AlCtrl = 0x01" CaseId="1">
				<?MAX_OUTPUT_ID 19?>
				<Description>
					<Purpose>Check that DuT confirms state request from Op to Init with AL Control = 0x01 or AL Control = 0x011
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Op (AL Status = 0x08)</PreCondition>
					<Action>IF TF-1200: State request to Init state with AckFlag 0 (AL Control = 0x01) or AckFlag 1 (AL Control = 0x11)
IF TF-1201: State request to Init state with AckFlag 0 (AL Control = 0x21) or AckFlag 1 (AL Control = 0x31) and ID Request = 1</Action>
					<PostCondition>- DuT goes to Init (AL Status = 0x01)
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)
- Input and Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)
- Outputs are in safe state</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #37"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Reset">
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SkipTestIfDeviceEmulationActive">
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep Name="SetStateMachineTimeouts">
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep Name="InitStateValue_0x01">
					<SetVariable Target="stateValue">#x01</SetVariable>
				</TestStep>
				<TestStep Name="InitStateValueNext_0x01">
					<SetVariable Target="stateValueNext">#x01</SetVariable>
				</TestStep>
				<TestStep Name="InitExpectedAlStatusCode_0x00">
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x21
- stateValueNext = 0x21
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x21</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="SetAckTo0">
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep Name="RunToOp_Ack0">
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_InSafeOP">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SetToStateValue_Ack0">
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="EventAck0">
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep Name="VerifyAlStatusCode_Ack0">
					<Description Id="7" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfMbxHandlerStopped_Ack0">
					<Description Id="8" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_first">
					<Description Id="9" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="LocalOutputHandlerStoppedInInit_Ack0">
					<CallTestFunction Name="LocalOutputHandlerStoppedInInit">
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Successful_Ack0">
					<WriteLine Id="10" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep Name="SetAckTo1">
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep Name="ResetDeviceIfOfflineTestWillBeSkipped">
					<Description Id="11">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="RunToOp">
					<Description Id="12" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="13">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="SetToStateValue">
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="14" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="Event">
					<WriteLine Id="15" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep Name="VerifyAlStatusCode">
					<Description Id="16" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfMbxHandlerStopped">
					<Description Id="17" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_second">
					<Description Id="18" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="LocalOutputHandlerStoppedInInit">
					<CallTestFunction Name="LocalOutputHandlerStoppedInInit">
						<Parameter>allPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Successful">
					<WriteLine Id="19" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#38 Op &gt; PreOp, AckFlag = 0 or 1, AlCtrl = 0x02" CaseId="2">
				<?MAX_OUTPUT_ID 17?>
				<Description>
					<Purpose>Check that DuT confirms state request from Op to PreOp with AL Control = 0x02 or AL Control = 0x012
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Op (AL Status = 0x08)</PreCondition>
					<Action>IF TF-1200: State request to Init state with AckFlag 0 (AL Control = 0x02) or AckFlag 1 (AL Control = 0x12)
IF TF-1201: State request to Init state with AckFlag 0 (AL Control = 0x22) or AckFlag 1 (AL Control = 0x32) and ID Request = 1</Action>
					<PostCondition>- DuT goes to PreOp (AL Status = 0x02)
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Input and Output Handler are stopped (Deactivate SyncManager Bit in +0x07.0)
- local outputs are in safe state</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #38"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x02-->
					<SetVariable Target="stateValue">2</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x02-->
					<SetVariable Target="stateValueNext">#x02</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x22
- stateValueNext = 0x22
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x22</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--errAck = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op-->
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>preOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="7" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_AckFalse">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_AckFalse">
					<Description Id="8" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfLocalOutputHandlerStoppedInPreOp-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="9" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--errAck = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="10">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> Op-->
					<Description Id="11" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="12">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backInitTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="13" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="14" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="15" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_AckTrue">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped_AckTrue">
					<Description Id="16" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfLocalOutputHandlerStoppedInPreOp-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="17" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#39 Op &gt; SafeOp, AckFlag = 0 or 1, AlCtrl = 0x04" CaseId="3">
				<?MAX_OUTPUT_ID 19?>
				<Description>
					<Purpose>Check that DuT confirms state request from Op to PreOp with AL Control = 0x04 or AL Control = 0x014
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Op (AL Status = 0x08)
- Send start-up commands for state change Op to SafeOp</PreCondition>
					<Action>IF TF-1200: State request to Init state with AckFlag 0 (AL Control = 0x04) or AckFlag 1 (AL Control = 0x14)
IF TF-1201: State request to Init state with AckFlag 0 (AL Control = 0x24) or AckFlag 1 (AL Control = 0x34) and ID Request = 1</Action>
					<PostCondition>- DuT goes to SafeOp (AL Status = 0x04)
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1
- Set local outputs to safe state</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #39"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x04-->
					<SetVariable Target="stateValue">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x04-->
					<SetVariable Target="stateValueNext">#x04</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x24
- stateValueNext = 0x24
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x24</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x24</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!-- > Op-->
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand OS-->
					<Description Id="5" Level="Verbose">Send device specific start up commands (SafeOp -&gt; Op)</Description>
					<SendStartupCommands>
						<StateTransition>OS</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="6">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backSafeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="7" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="8" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="9" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="10" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="11">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!-- > Op-->
					<Description Id="12" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="13">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SendStartUpCommand OS-->
					<Description Id="14" Level="Verbose">Send device specific start up commands (SafeOp -&gt; Op)</Description>
					<SendStartupCommands>
						<StateTransition>OS</StateTransition>
					</SendStartupCommands>
					<RaiseErrorOnFailure Id="15">Failed to send start-up commands!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>backSafeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="16" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="17" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="18" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="19" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#40 Op &gt; Op, AckFlag 0 or 1, AlCtrl = 0x08" CaseId="4">
				<?MAX_OUTPUT_ID 16?>
				<Description>
					<Purpose>Check that DuT confirms state request from Op to Op with AL Control = 0x08 or AL Control = 0x018
IF TF-1201: Additionally, check if ID value is returned</Purpose>
					<PreCondition>- DuT in Op (AL Status = 0x08)</PreCondition>
					<Action>IF TF-1200: State request to Init state with AckFlag 0 (AL Control = 0x08) or AckFlag 1 (AL Control = 0x18)
IF TF-1201: State request to Init state with AckFlag 0 (AL Control = 0x28) or AckFlag 1 (AL Control = 0x38) and ID Request = 1</Action>
					<PostCondition>- DuT remains in Op (AL Status = 0x08)
- AL Status Code
   IF TF-1200: should be 0
   IF TF-1201: shall be the ID Value
- ID Flag 
   IF TF-1200: 0
   IF TF-1201: 1</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #40"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue = 0x08-->
					<SetVariable Target="stateValue">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x08-->
					<SetVariable Target="stateValueNext">#x08</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x00-->
					<SetVariable Target="expectedAlStatusCode">#x00</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x28
- stateValueNext = 0x28
- expectedAlStatusCode = ID-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x28</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValueNext">#x28</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="expectedAlStatusCode">uint32_idValue</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--ACK = 0-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op-->
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Delay="1000">
					<!--Event-->
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="7" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="8" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--ACK = 1-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="9">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> Op-->
					<Description Id="10" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="11">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<Description Id="12">Request AL Control = 0x0018</Description>
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnFailure Id="13" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Delay="1000">
					<!--Event-->
					<WriteLine Id="14" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--VerifyAlStatusCode-->
					<Description Id="15" Level="Verbose">Check AL Status Code (0x0134)</Description>
					<CallTestFunction Name="VerifyAlStatusCode">
						<Parameter>alStatusCode</Parameter>
						<Parameter>expectedAlStatusCode</Parameter>
						<Parameter>#x0000</Parameter>
						<Parameter>alStatus</Parameter>
						<Parameter>stateValueNext</Parameter>
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="16" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#42 Op &gt; SafeOp, AckFlag = 0 or 1, AlCtrl = 0x03" CaseId="5">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>Check that DuT rejects state request from Op to Boot state with AckFlag = 0 (i.e.  AL Control = 0x03) and from Op to Boot with AckFlag = 1 (i.e. AL Control = 0x13)
IF- Tf-1201: IF TF-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Op (Error Flag = 0)</PreCondition>
					<Action> TF-1200: State request to Boot with Ack Flag = 0 (AL Control = 0x03) or Ack Flag = 1 (AL Control = 0x13)
 TF-1201: State request to Boot with Ack Flag = 0 (AL Control = 0x23) or Ack Flag = 1 (AL Control = 0x33) and ID Flag = 1</Action>
					<PostCondition>- DuT goes to Error SafeOp, i.e. Error Flag = 1
- Set AL Status Code to 0x11
- ID Flag remains 0
- Set local outputs to safe state
- SyncManager2 is disabled (+0x07.0 = 1). Only if SyncManager 2 is not used or an input error occurs the Input SYncManager is disabled while SyncmManager 2 remains enabled </PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #42"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue =0x03-->
					<SetVariable Target="stateValue">3</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x11-->
					<SetVariable Target="expectedAlStatusCode">#x11</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x23-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x23</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--errAck = False-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op -->
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSmToCheckLocalOutputHandlerStopped">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Op > stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="7" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifySyncManChannelDisabled-->
					<CallTestFunction Name="VerifySyncManChannelDisabled">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="8" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="9">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--errAck = True-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op -->
					<Description Id="10" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="11">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Op > stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="12" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="13" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="14" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifySyncManChannelDisabled-->
					<CallTestFunction Name="VerifySyncManChannelDisabled">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="15" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#43 Op &gt; SafeOp, ErrFlag = 0 or AckFlag = 1, AlCtrl = unknown" CaseId="6">
				<?MAX_OUTPUT_ID 15?>
				<Description>
					<Purpose>Check that DuT rejects state request from Op to unknown state with AckFlag = 0 (i.e.  AL Control = 0x06) and from Opo to unknown with AckFlag = 1 (i.e. AL Control = 0x16)
IF- Tf-1201: Additionally, check if ID request is ignored</Purpose>
					<PreCondition>- DuT in Op</PreCondition>
					<Action>IF TF-1200: State request to unknown state with either AckFlag 0 (AL Control = 0x06) or 1 (AL Control = 0x16)
IF TF-1201: State request to unknown state with either AckFlag 0 (AL Control = 0x26) or 1 (AL Control = 0x36), ID Request = 1</Action>
					<PostCondition>- DuT goes to Error SafeOp (AL Status = 0x14)
- Set AL Status Code to 0x12
- ID Flag = 0
- Set local outputs to safe state
- SyncManager2 is disabled (+0x07.0 = 1). Only if SyncManager 2 is not used or an input error occurs the Input SyncManager is disabled while SyncManager 2 remains enabled</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #43"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipIfNotTf1201OrReg134NotSupported-->
					<CallTestFunction Name="SkipIfNotTf1201OrReg134NotSupported">
						<Parameter>bool_tf1201</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="0">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="1" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="2" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--stateValue =Unknown (0x06)-->
					<SetVariable Target="stateValue">6</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x12-->
					<SetVariable Target="expectedAlStatusCode">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--overwrite if TF-1201: 
- stateValue = 0x26-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SetVariable Target="stateValue">#x26</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--errAck = False-->
					<SetVariable Target="errAck">False</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op -->
					<Description Id="3" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="false">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="5" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="6" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="7" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--CheckIfLocalOutputHandlerStoppedInPreOp-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifySyncManChannelDisabled-->
					<CallTestFunction Name="VerifySyncManChannelDisabled">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="8" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="9">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--errAck = True-->
					<SetVariable Target="errAck">True</SetVariable>
				</TestStep>
				<TestStep>
					<!--> Op -->
					<Description Id="10" Level="Verbose">Set to Op (AL Status = 0x08)</Description>
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="11">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--> stateValue-->
					<RequestState ErrorAck="true">
						<StateValue>stateValue</StateValue>
						<CheckState>
							<Timeout>safeOPTimeout</Timeout>
							<AlStatus>alStatus</AlStatus>
							<AlStatusCode>alStatusCode</AlStatusCode>
						</CheckState>
					</RequestState>
					<RaiseErrorOnSuccess Id="12" Param0="stateValueNext" Param1="alStatus" Param2="alStatusCode">Invalid AL Status | Expected AL Status = 0x{0:x2} | Read = 0x{1:x2} || Info: AL Status Code = 0x{2:x4}</RaiseErrorOnSuccess>
				</TestStep>
				<TestStep>
					<!--Event-->
					<WriteLine Id="13" Param0="stateValue" Param1="errAck" Level="Output">EVENT: AL_Control.ind (AL Control State = 0x{0:x2}, Ack Flag = {1})</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="14" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--VerifySyncManChannelDisabled-->
					<CallTestFunction Name="VerifySyncManChannelDisabled">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Successful-->
					<WriteLine Id="15" Param0="alStatus" Param1="errAck" Param2="alStatusCode" Param3="alStatusCode" Level="Success">SUCCESSFUL: | AL Status = 0x{0:x2} | errAck = {1} | AL Status Code = 0x{2:x2}</WriteLine>
				</TestStep>
			</TestCase>
			<TestCase Name="#44.1 Op &gt; Op, SmSett0123 match" CaseId="7">
				<?MAX_OUTPUT_ID 1?>
				<Description>
					<Purpose>Test only for completeness. No test logic performed.</Purpose>
					<PreCondition>- DuT uses SyncManger Change event (0x0204.04 = TRUE)
- DuT is set to Op
- ErrorFlag = 0</PreCondition>
					<Action>SM Change event is issued (this can only be done by changing the SyncManager Activation Register (+0x06.1). So this is not possible. Hence, the test is only theoretical</Action>
					<PostCondition>- AL Event is acknowledged</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #44.1"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Info-->
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<SkipCase Id="1">INFO | Test Case only theoretical and cannot be tested in real environment.</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#45  Op &gt; PreOp, Sm_Chg, ErrFlag = 0, SmSett01 match, SmSett 23 not match" CaseId="8">
				<?MAX_OUTPUT_ID 17?>
				<Description>
					<Purpose>Check if DuT goes to ErrorPreOp if process data SyncManagers are set to invalid settings
If TF-1201: Test is skipped</Purpose>
					<PreCondition>- DuT in Op (AL Status = 0x08)
- Settings for all available SyncManagers match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager settings for one process data SyncManager at a time</Action>
					<PostCondition>- DuT goes to Error PreOp, i.e. AL Status = 0x12
- Set AL Status Code: 
	When Output SyncManager Settings do not match: 0x1D
	When Input SyncManager Settings do not match: 0x1E
	AL Status Code 0x17 should not be use since it is inaccurate
- Input and Output Handler are stopped (Deactivate SyncManager Bit in +0x07.0)
- local outputs are in safe state</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #45"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="2" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="3" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--InitStateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--InitPdSmIndex-->
					<SetVariable Target="index">0</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x12-->
					<SetVariable Target="stateValueNext">#x12</SetVariable>
				</TestStep>
				<TestStep>
					<!--GetListOfAllPdSm-->
					<CallTestFunction Name="GetListOfAllPdSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
					<WriteLine Id="17" Param0="allPdSm" Level="Verbose">allPdSm = {0}</WriteLine>
				</TestStep>
				<TestStep Name="GetNumberOfallPdSm">
					<SizeOf UInt32Var="uint32_sizeOfAllPdSm">allPdSm</SizeOf>
				</TestStep>
				<TestStep>
					<!--Init smNo with first PdSm-->
					<Compare>
						<Equal>
							<Value1>uint32_sizeOfAllPdSm</Value1>
							<Value2>0</Value2>
							<Return Id="4">No Process Data SyncManagers supported by this device | Test skipped!</Return>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Init smNo with first PdSm-->
					<GetArrayItem Index="index" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep>
					<!--Init lastPdSm-->
					<GetArrayItem Index="uint32_sizeOfAllPdSm-1" SourceArray="allPdSm" Target="lastPdSm"></GetArrayItem>
					<WriteLine Id="5" Param0="lastPdSm" Level="Verbose">highest process data Syncmanager = {0}</WriteLine>
				</TestStep>
				<TestStep Name="SETWRONGSMSETTINGS">
					<!--expectedAlStatusCode2 = 0x17-->
					<SetVariable Target="expectedAlStatusCode2">#x17</SetVariable>
				</TestStep>
				<TestStep>
					<!--Get smControlType-->
					<GetBits Source="DeviceDescr.SM[smNo].ControlByte" Target="smControlType">
						<Offset>2</Offset>
						<Length>2</Length>
					</GetBits>
					<WriteLine Id="6" Param0="smControlType" Level="Verbose">Type of next tested SyncManager = {0} | Info: 0 =  Input , 1 = Output</WriteLine>
					<Compare>
						<Equal>
							<Value1>smControlType</Value1>
							<Value2>0</Value2>
							<GotoStep>INPUTALCODE</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="OUTPUTALCODE">
					<!--expectedAlStatusCode = 0x1D (Outputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1D</SetVariable>
					<WriteLine Id="7" Param0="expectedAlStatusCode" Level="Verbose">expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<GotoStep>START</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="INPUTALCODE">
					<!--expectedAlStatusCode = 0x1E (Inputs)-->
					<SetVariable Target="expectedAlStatusCode">#x1E</SetVariable>
					<WriteLine Id="8" Param0="expectedAlStatusCode" Level="Verbose">expected AL Status Code according to SyncManager Type = 0x{0:x2}</WriteLine>
				</TestStep>
				<TestStep Name="START">
					<!--> Op -->
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="9">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--SetWrongSyncManSettings-->
					<Description Id="10" Level="Verbose" Param0="smNo">Sent invalid SyncManager settings for SM{0}</Description>
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Delay="backInitTimeout">
					<!--Event-->
					<WriteLine Id="11" Param0="backInitTimeout" Level="Output">Event: SM_Chg | Wait for {0}ms before expected behaviour is checked!</WriteLine>
				</TestStep>
				<TestStep>
					<!--GetAndVerifyAlStatusAndStatusCode-->
					<Description Id="12" Level="Verbose">Check AL Status (0x0130) and AL Status Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>expectedAlStatusCode2<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--LoggerInfoLocalOutputHandlerStopped-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped">
					<Description Id="13" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="END">
					<!--Part Successful-->
					<WriteLine Id="14" Param0="smNo" Level="Success">SUCCESSFUL for Sm{0}</WriteLine>
				</TestStep>
				<TestStep Name="AllPdSmTested">
					<SetVariable Target="index">index+1</SetVariable>
					<Compare>
						<Equal>
							<Value1>index</Value1>
							<Value2>uint32_sizeOfAllPdSm</Value2>
							<Return Id="15"></Return>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="GetNextPdSm">
					<GetArrayItem Index="index" SourceArray="allPdSm" Target="smNo"></GetArrayItem>
				</TestStep>
				<TestStep Name="ResetDeviceForNextSmTest">
					<Description Id="16">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
					<Compare>
						<Equal>
							<Value1>true</Value1>
							<Value2>true</Value2>
							<GotoStep>SETWRONGSMSETTINGS</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#46 Op &gt; Init, SmSett0 or SmSett1 not match" CaseId="9">
				<?MAX_OUTPUT_ID 12?>
				<Description>
					<Purpose>Check if DuT goes to ErrorPreOp if mailbox SyncManagers are set to invalid settings
If TF-1201: Test is skipped</Purpose>
					<PreCondition>- DuT is set to Op (AL Status = 0x08)
- all SyncManager settings match</PreCondition>
					<Action>SyncManager Change event is generated by setting invalid SyncManager0 or SyncManager1 settings</Action>
					<PostCondition>- AL Status Code = 0x16
- AL Status = 0x11
- Mailbox Handler is stopped (Deactivate SyncManager Bits in 0x0807.0 and 0x080F.0 are True)
- Input and Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)
- local outputs are in safe state</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #46"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep Name="SkipForTf1201SinceNotExplDevIdSpecific">
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="ResetAndSkipIfOffline">
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
					<Description Id="2" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SkipTestIfDeviceEmulationActive">
					<Description Id="3" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep Name="SkipTestIfComplexDevButNoMbxSyncManagers">
					<Compare>
						<NotEqual>
							<Value1>DeviceDescr.SM[0]</Value1>
							<Value2>MBoxOut</Value2>
							<SkipCase Id="4">SKIP | No MailboxOut SyncManager configured in ESI file, i .e. device does not support mailboxes</SkipCase>
						</NotEqual>
					</Compare>
				</TestStep>
				<TestStep Name="SetStateMachineTimeouts">
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep Name="stateValueNext_0x11">
					<SetVariable Target="stateValueNext">#x11</SetVariable>
				</TestStep>
				<TestStep Name="expcetedAlStatusCode_0x16">
					<SetVariable Target="expectedAlStatusCode">#x16</SetVariable>
				</TestStep>
				<TestStep Name="InitSmNo">
					<SetVariable Target="smNo">0</SetVariable>
				</TestStep>
				<TestStep Name="SetToPreOpForFollowingFunctionCalls">
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="5">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="GetListOfEnabledOutputSm_forCheckOfLocalOutputHandlerStopped">
					<CallTestFunction Name="GetListOfEnabledInputOrOutputSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>Outputs</Parameter>
						<OutParameter>allEnabledOutputSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="GetListOfAllEnabledSm_forCheckIfInputAndOutputHandlerWereStopped">
					<CallTestFunction Name="GetListOfAllEnabledSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<OutParameter>allEnabledPdSm</OutParameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="RESET">
					<Description Id="6">Reset at beginning of following part of test</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep Name="Op">
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="7">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Name="SetWrongSyncManSettings">
					<CallTestFunction Name="SetWrongSyncManSettings">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>smNo</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="Event" Delay="backInitTimeout">
					<WriteLine Id="8" Param0="backInitTimeout" Level="Output">Event: SM_Chg | Wait for {0}ms before expected behaviour is checked!</WriteLine>
				</TestStep>
				<TestStep Name="GetAndVerifyAlStatusAndStatusCode">
					<Description Id="9" Level="Verbose">Check AL Status (0x0130) and AL Status Code(0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndStatusCode">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>expectedAlStatusCode<!--expected AlStatusCode-->
						</Parameter>
						<Parameter>#x0000<!--alternative AlStatusCode2-->
						</Parameter>
						<Parameter>#x0000<!--alternative  AlStatusCode3-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfMbxHandlerStopped">
					<Description Id="10" Level="Verbose">Checks if Mailbox Handler was stopped (Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfMbxHandlerStopped">
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfInputAndOutputHandlerStopped">
					<Description Id="11" Level="Verbose">Check  if process data handler was stopped: Reads the Deativate SyncManager Bit in the PDI Control SyncManager register (+0x07.0). If Deactivate Bit is not True (sm deactivated) then an Error is raised)</Description>
					<CallTestFunction Name="CheckIfInputAndOutputHandlerStopped">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>allEnabledPdSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="LocalOutputHandlerStoppedInInit">
					<CallTestFunction Name="LocalOutputHandlerStoppedInInit">
						<Parameter>allEnabledOutputSm</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="LoggerOutputThatForThisMbxSmSuccessful">
					<WriteLine Id="12" Param0="smNo" Level="Success">SUCCESSFUL for Sm{0}</WriteLine>
				</TestStep>
				<TestStep Name="CheckIfTheTwoMbxSmAreTested">
					<SetVariable Target="smNo">smNo+1</SetVariable>
					<Compare>
						<Lower>
							<Value1>smNo</Value1>
							<Value2>2</Value2>
							<GotoStep>RESET</GotoStep>
						</Lower>
					</Compare>
				</TestStep>
			</TestCase>
			<TestCase Name="#49 Op &gt; SafeOp, WD expired" CaseId="10">
				<?MAX_OUTPUT_ID 21?>
				<Description>
					<Purpose>Check if slave goes to ErrorSafeOp if process data is stopped
If TF-1201: Test is skipped</Purpose>
					<PreCondition>- DuT is set to Op (AL Status = 0x08)
- DuT has output process data (i.e. Output SyncManager length is unequal 0)</PreCondition>
					<Action>- process data communication is stopped</Action>
					<PostCondition>- AL Status Code = 0x1B
- AL Status = 0x14
- AL Status Codes if DuT supports DC: 0x1A, 0x33, 0x34
- Output Handler is stopped (Deactivate SyncManager Bit in +0x07.0)
- local outputs are in safe state
- Warning if WD-time+10% exceeded
- Error if WD-time+OpToSafeopTimeout exceeded</PostCondition>
					<References>
						<Reference Specification="ETG.1000, part 6" Chapter="6.4,  #49"></Reference>
						<Reference Specification="ETG.1020" Chapter="Explicit Device Identification"></Reference>
					</References>
					<Mandatory>true</Mandatory>
				</Description>
				<TestStep>
					<!--SkipForTf1201SinceNotExplDevIdSpecific-->
					<Compare>
						<Equal>
							<Value1>bool_tf1201</Value1>
							<Value2>true</Value2>
							<SkipCase Id="0">Test case not specific for Explicit Device Identification | Refer to test file TF-1200</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="1">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--ReturnErrorIfCurrentConfigRequiresDcAndNoCu-->
					<Description Id="2" Level="Verbose">Check if DC OpMode of the current DuT configuration requires realtime-enableing hardware and if such is connected. Ortherwise skip test.</Description>
					<CallTestFunction Name="ReturnErrorIfCurrentConfigRequiresDcAndNoCu">
						<Parameter>False</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep>
					<!--SkipTestIfDeviceEmulationActive-->
					<Description Id="3" Level="Verbose">Check if device emulation (register 0x0140.8) is active. If active test is skipped.</Description>
					<CallTestFunction Name="SkipTestIfDeviceEmulationActive"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--Set StateMachineTimeouts-->
					<CallFunction>SetEsmTimeouts</CallFunction>
				</TestStep>
				<TestStep>
					<!--bWarning = false-->
					<SetVariable Target="bWarning">FALSE</SetVariable>
				</TestStep>
				<TestStep>
					<!--stateValueNext = 0x14-->
					<SetVariable Target="stateValueNext">#x14</SetVariable>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x1B-->
					<AddArrayItem TargetArray="uint16ArrayExpectedAlStatusCodes">#x001B</AddArrayItem>
				</TestStep>
				<TestStep>
					<!--AllowAdditionalStatusCodesIfDcSupported-->
					<Compare>
						<Equal>
							<Value1>CurrentConfig.Dc</Value1>
							<Value2>FALSE</Value2>
							<GotoStep>SETESMTIMEOUTS</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x1A-->
					<AddArrayItem TargetArray="uint16ArrayExpectedAlStatusCodes">#x001A</AddArrayItem>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x33-->
					<AddArrayItem TargetArray="uint16ArrayExpectedAlStatusCodes">#x0033</AddArrayItem>
				</TestStep>
				<TestStep>
					<!--expectedAlStatusCode = 0x34-->
					<AddArrayItem TargetArray="uint16ArrayExpectedAlStatusCodes">#x0034</AddArrayItem>
				</TestStep>
				<TestStep Name="SETESMTIMEOUTS">
					<!--> PreOp (for following functions)-->
					<RunToState Timeout="preOPTimeout">
						<State>PREOP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="4">Failed to run to PreOp!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--GetListOfAllEnabledOutputSm and skip test if no enabled Outputs PD SM-->
					<CallTestFunction Name="GetListOfEnabledInputOrOutputSm">
						<Parameter>Settings.bAll_debugMsg</Parameter>
						<Parameter>Outputs</Parameter>
						<OutParameter>allPdSm</OutParameter>
					</CallTestFunction>
					<Compare>
						<Equal>
							<Value1>noOutputSm</Value1>
							<Value2>true</Value2>
							<SkipCase Id="5">Devcie does not have any Output Process Data SyncManagers -&gt; Skip Test Case</SkipCase>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>noEnabledOutputSm</Value1>
							<Value2>true</Value2>
							<SkipCase Id="6">Devcie does not have enabled Output Process Data SyncManagers -&gt; Skip Test Case</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="ReturnIfDesiredSmTypeNotAvailable">
					<SizeOf UInt32Var="uint32_lengthOfList">allPdSm</SizeOf>
					<Compare>
						<Equal>
							<Value1>Settings.bAll_debugMsg</Value1>
							<Value2>TRUE</Value2>
							<WriteLine Id="7" Param0="uint32_lengthOfList">  List of Output SM | lengthOfList = {0}</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>uint32_lengthOfList</Value1>
							<Value2>0</Value2>
							<SkipCase Id="8">SKIP | No output process datat SyncManager supported.</SkipCase>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep>
					<!--Reset device (if offline test will skipped)-->
					<Description Id="9">Reset</Description>
					<CallTestFunction Name="Reset"></CallTestFunction>
				</TestStep>
				<TestStep>
					<!--> Op -->
					<RunToState Timeout="safeOPTimeout">
						<State>OP</State>
					</RunToState>
					<RaiseErrorOnFailure Id="10">Failed to run to Op!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep Delay="80">
					<!--Wait a time until PD frames are sent for sure-->
					<WriteLine Id="11" Level="Verbose">INFO | Wait 80ms until PD frames are sent for sure</WriteLine>
				</TestStep>
				<TestStep>
					<!--Read uint16_wdDiv-->
					<ReadEscData Target="uint16_wdDiv">
						<Address>#x400</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="12">Failed to read register 0x0400!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--Read uint16_wdPd-->
					<ReadEscData Target="uint16_wdPd">
						<Address>#x420</Address>
					</ReadEscData>
					<RaiseErrorOnFailure Id="13">Failed to read register 0x0420!</RaiseErrorOnFailure>
				</TestStep>
				<TestStep>
					<!--uint64_wdPdTime-->
					<SetVariable Target="uint64_wdPdTime">((uint16_wdDiv+2)*40*uint16_wdPd+uint16_wdDiv)/ 1000000</SetVariable>
				</TestStep>
				<TestStep>
					<!--uint64_wdPdInclJitter-->
					<SetVariable Target="uint64_wdPdInclJitter">(((uint16_wdDiv+2)*40*uint16_wdPd+uint16_wdDiv)+(((uint16_wdDiv+2)*40*uint16_wdPd+uint16_wdDiv)/10))/ 1000000</SetVariable>
					<WriteLine Id="14" Level="Verbose" Param0="uint64_wdPdTime" Param1="uint16_wdDiv" Param2="uint16_wdPd" Param3="uint64_wdPdInclJitter">INFO | WD time = {0} | WD Devider (reg. 0x0400)= {1} | WD PD time (reg. 0x0420) = {2} | WD time + 10%  = {3}ms</WriteLine>
				</TestStep>
				<TestStep>
					<!--uint64_wdPdPlusBackToSafeopTimeout-->
					<SetVariable Target="uint64_wdPdPlusBackToSafeopTimeout">backSafeOPTimeout - (((uint16_wdDiv+2)*40*uint16_wdPd+uint16_wdDiv)/10) / 1000000</SetVariable>
				</TestStep>
				<TestStep Name="DEBUGMakeWdTestFail">
					<SetVariable Target="bMakeWdTestFail">false</SetVariable>
				</TestStep>
				<TestStep Name="DEBUGOverwriteWdValuesToForceErrorCase">
					<!--DEBUG: overwrite WD values if debug = true-->
					<Compare>
						<Equal>
							<Value1>bMakeWdTestFail AND Settings.bAll_debugMsg</Value1>
							<Value2>TRUE</Value2>
							<SetVariable Target="uint64_wdPdTime">1</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bMakeWdTestFail AND Settings.bAll_debugMsg</Value1>
							<Value2>TRUE</Value2>
							<SetVariable Target="uint64_wdPdInclJitter">2</SetVariable>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>bMakeWdTestFail AND Settings.bAll_debugMsg</Value1>
							<Value2>TRUE</Value2>
							<SetVariable Target="uint64_wdPdPlusBackToSafeopTimeout">3</SetVariable>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="STOP_PD">
					<!--EVENT: Event: Stop Cyclic Frames-->
					<StopCyclicFrames></StopCyclicFrames>
					<WriteLine Id="15" Level="Output">EVENT | Stop process data communication</WriteLine>
				</TestStep>
				<TestStep Delay="uint64_wdPdInclJitter" Name="WAIT_PD_WD">
					<!--Wait-->
					<WriteLine Id="16" Level="Output" Param0="uint64_wdPdInclJitter">Wait for {0}ms (PD watchdog time + 10%) before checking if watchdog expiration was detected by device.</WriteLine>
				</TestStep>
				<TestStep Name="ALSTATUSCODEWARNING">
					<!--Skip Warning in Looger if WarningAccepted = true-->
					<Compare>
						<Equal>
							<Value1>Settings.b04_10_WarningAccepted</Value1>
							<Value2>TRUE</Value2>
							<GotoStep>WAIT_PD_WD_PLUS_BACK2SAFEOP</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep Name="GetAndVerifyAlStatusAndStatusCodeAndOnlyGenerateWarning">
					<!--GetAndVerifyAlStatusAndXStatusCodes-->
					<Description Id="17" Level="Verbose">Check AL Status (0x0130) and AL Status  Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndXStatusCodes">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>uint16ArrayExpectedAlStatusCodes<!--List of all allowed AlStatusCode-->
						</Parameter>
						<Parameter>TRUE<!--bWarning-->
						</Parameter>
						<Parameter>Settings.bAll_debugMsg<!--b_DebugMsg-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="CheckIfWdReactionAlreadyDone">
					<!--CheckIfWdReactionAlreadyDone-->
					<ReadEscData Target="alStatus">
						<Address>#x0130</Address>
					</ReadEscData>
				</TestStep>
				<TestStep>
					<ReadEscData Target="alStatusCode">
						<Address>#x0130</Address>
					</ReadEscData>
				</TestStep>
				<TestStep>
					<Compare>
						<Equal>
							<Value1>Settings.bAll_debugMsg</Value1>
							<Value2>true</Value2>
							<WriteLine Id="18">   CheckIfWdReactionAlreadyDone</WriteLine>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>alStatus</Value1>
							<Value2>stateValueNext</Value2>
							<GotoStep>LOCAL_OUTPUT_HANDLER_STOPPED</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>alStatusCode</Value1>
							<Value2>0x001B</Value2>
							<GotoStep>LOCAL_OUTPUT_HANDLER_STOPPED</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>alStatusCode</Value1>
							<Value2>0x001A</Value2>
							<GotoStep>LOCAL_OUTPUT_HANDLER_STOPPED</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>alStatusCode</Value1>
							<Value2>0x0033</Value2>
							<GotoStep>LOCAL_OUTPUT_HANDLER_STOPPED</GotoStep>
						</Equal>
					</Compare>
					<Compare>
						<Equal>
							<Value1>alStatusCode</Value1>
							<Value2>0x0034</Value2>
							<GotoStep>LOCAL_OUTPUT_HANDLER_STOPPED</GotoStep>
						</Equal>
					</Compare>
				</TestStep>
				<TestStep></TestStep>
				<TestStep Delay="uint64_wdPdPlusBackToSafeopTimeout" Name="WAIT_PD_WD_PLUS_BACK2SAFEOP">
					<!--Wait until WD+BackToSafeop expired-->
					<WriteLine Id="19" Level="Output" Param0="uint64_wdPdPlusBackToSafeopTimeout">Wait again until watchdog time plus BackToSafeop timeout expires ({0}ms)</WriteLine>
				</TestStep>
				<TestStep Name="ALSTATUSCODEERROR">
					<!--GetAndVerifyAlStatusAndXStatusCodes after ESM Timeout expired-->
					<Description Id="20" Level="Verbose">Check AL Status (0x0130) and AL Status  Code (0x0134)</Description>
					<CallTestFunction Name="GetAndVerifyAlStatusAndXStatusCodes">
						<Parameter>stateValueNext<!--expcted AlStatus-->
						</Parameter>
						<Parameter>uint16ArrayExpectedAlStatusCodes<!--List of all allowed AlStatusCode-->
						</Parameter>
						<Parameter>FALSE<!--bWarning-->
						</Parameter>
						<Parameter>Settings.bAll_debugMsg<!--b_DebugMsg-->
						</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="LOCAL_OUTPUT_HANDLER_STOPPED">
					<!--LocalOutputHandlerStoppedInfo-->
					<CallTestFunction Name="LocalOutputHandlerStoppedInfo">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="VerifySyncManChannelDisabled">
					<!--SmChannelDisabled-->
					<CallTestFunction Name="VerifySyncManChannelDisabled">
						<Parameter>Settings.bAll_debugMsg</Parameter>
					</CallTestFunction>
				</TestStep>
				<TestStep Name="SUCCESSFULL">
					<!--Successful-->
					<WriteLine Id="21" Level="Success" Param0="errAck">SUCCESSFUL | ErrAckBit 0x0120:04 = {0}</WriteLine>
				</TestStep>
			</TestCase>
		</TestGroup>
	</TestGroups>
</EtherCATTest>